"use strict";(self.webpackChunkatlascode=self.webpackChunkatlascode||[]).push([[820],{30981:(e,t,n)=>{n.d(t,{n:()=>s});var a=n(82096),l=n(54392),r=n(20053),i=n(96540),c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n};const o=(0,a.A)((e=>({root:{fontSize:e.typography.pxToRem(14),fontStyle:"italic"}}))),s=(0,i.memo)((e=>{var{children:t,className:n}=e,a=c(e,["children","className"]);const s=o();return i.createElement(l.A,Object.assign({variant:"subtitle1",className:(0,r.A)(s.root,n)},a),t||"")}))},31783:(e,t,n)=>{n.d(t,{x:()=>s});var a=n(82096),l=n(54392),r=n(20053),i=n(96540),c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n};const o=(0,a.A)((e=>({root:{marginRight:e.spacing(2)}}))),s=(0,i.memo)((e=>{var{children:t,className:n}=e,a=c(e,["children","className"]);const s=o();return i.createElement(l.A,Object.assign({variant:"h4",className:(0,r.A)(s.root,n)},a),t||"")}))},45538:(e,t,n)=>{n.d(t,{q:()=>c});var a=n(54392),l=n(26758),r=n(10782),i=n(96540);const c=(0,i.memo)((({className:e})=>i.createElement(a.A,{component:"div",variant:"body1",className:e},i.createElement(l.A,{display:"inline",fontWeight:"fontWeightBold"},"Tip:"," ")," ","You can have issue keys auto-added to your commit messages using"," ",i.createElement(r.A,{href:"https://bitbucket.org/snippets/atlassian/qedp7d"},"our prepare-commit-msg hook"))))},64842:(e,t,n)=>{n.d(t,{K:()=>A});var a=n(2948),l=n(96746),r=n(32118),i=n(68016),c=n(30240),o=n(27606),s=n(83220),m=n(84630),u=n(64794),d=n(65816),b=n(26758),p=n(96540),E=n(5676),g=n(50569),h=n(11245);const A=({user:e,postMessageFunc:t})=>{const[n,A]=(0,p.useState)(!1),{register:f,handleSubmit:C,errors:v,watch:k,formState:y,reset:S}=(0,E.mN)({mode:"onChange"}),x=k(["canBeContacted"]),I=(0,p.useCallback)((e=>{e.canBeContacted||(e.emailAddress="do-not-reply@atlassian.com"),t({type:g.I.SubmitFeedback,feedback:e}),A(!1),S()}),[t,S]),w=(0,p.useCallback)((()=>{A(!1),S()}),[S]),R=(0,p.useCallback)((()=>{A(!0)}),[]);return p.createElement(p.Fragment,null,p.createElement(l.A,{variant:"contained",color:"primary",onClick:R},"Send Feedback"),p.createElement(r.A,{fullWidth:!0,maxWidth:"md",open:n,onClose:w},p.createElement(i.A,null,p.createElement(c.A,null,"Send Feedback"),p.createElement(o.A,{container:!0,direction:"column",spacing:2},p.createElement(o.A,{item:!0},p.createElement(s.A,{name:"type",defaultValue:h.MW.Question,select:!0,required:!0,autoFocus:!0,autoComplete:"off",margin:"dense",id:"type",label:"Type of Feedback",helperText:v.type?v.type.message:void 0,fullWidth:!0,error:!!v.type,inputRef:f},p.createElement(m.A,{key:h.MW.Question,value:h.MW.Question},"Ask a question"),p.createElement(m.A,{key:h.MW.Comment,value:h.MW.Comment},"Leave a comment"),p.createElement(m.A,{key:h.MW.Bug,value:h.MW.Bug},"Report a bug"),p.createElement(m.A,{key:h.MW.Suggestion,value:h.MW.Suggestion},"Suggest an improvement"))),p.createElement(o.A,{item:!0},p.createElement(s.A,{required:!0,multiline:!0,rows:3,id:"description",name:"description",label:"Description",helperText:v.description?v.description.message:void 0,fullWidth:!0,error:!!v.description,inputRef:f({required:"Description URL is required"})})),p.createElement(o.A,{item:!0},p.createElement(s.A,{name:"userName",defaultValue:e.userName,required:!0,autoComplete:"off",margin:"dense",id:"userName",label:"Your name",helperText:v.userName?v.userName.message:void 0,fullWidth:!0,error:!!v.userName,inputRef:f({required:"Your name is required"})})),p.createElement(o.A,{item:!0},p.createElement(a.V_,{control:p.createElement(u.A,{name:"canBeContacted",defaultChecked:!0,size:"small",color:"primary",id:"canBeContacted",value:"canBeContacted",inputRef:f}),label:"Atlassian can contact me about this feedback",variant:"body1",spacing:1})),p.createElement(o.A,{item:!0},x.canBeContacted&&p.createElement(s.A,{required:!0,name:"emailAddress",defaultValue:e.emailAddress,autoComplete:"off",margin:"dense",id:"emailAddress",label:"Your contact email",helperText:v.emailAddress?v.emailAddress.message:void 0,fullWidth:!0,error:!!v.emailAddress,inputRef:f({required:"Your contact email is required"})})))),p.createElement(d.A,null,p.createElement(l.A,{disabled:!y.isValid,onClick:C(I),variant:"contained",color:"primary"},"Submit"),p.createElement(l.A,{onClick:w,color:"primary"},"Cancel")),p.createElement(b.A,{marginBottom:2})))}},85289:(e,t,n)=>{n.r(t),n.d(t,{default:()=>wn});var a,l=n(82096),r=n(29984),i=n(61434),c=n(35376),o=n(54392),s=n(74139),m=n(67264),u=n(96232),d=n(36936),b=n(27606),p=n(3148),E=n(26758),g=n(57756);!function(e){e.Login="login",e.Logout="logout",e.SaveSettings="saveSettings",e.OpenJSON="openJson",e.JQLOptionsRequest="jqlOptionsRequest",e.JQLSuggestionsRequest="JQLSuggestionsRequest",e.FilterSearchRequest="filterSearchRequest",e.ValidateJqlRequest="validateJqlRequest",e.SetTarget="setTarget",e.CreateJiraIssue="createJiraIssue",e.ViewJiraIssue="viewJiraIssue",e.CreatePullRequest="createPullRequest",e.ViewPullRequest="viewPullRequest"}(a||(a={}));var h=n(47933),A=n(96022),f=n(11245),C=n(3119),v=n(96540),k=n(9361),y=n(50569),S=n(27030),x=n(68414),I=function(e,t,n,a){return new(n||(n=Promise))((function(l,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))};const w={postMessage:e=>{},updateConfig:(e,t)=>{},setConfigTarget:e=>{},refresh:()=>{},openLink:e=>{},login:(e,t)=>{},logout:e=>{},fetchJqlOptions:e=>new Promise(((e,t)=>{e({visibleFieldNames:[],visibleFunctionNames:[],jqlReservedWords:[]})})),fetchJqlSuggestions:(e,t,n,a,l)=>new Promise(((e,t)=>{e([])})),fetchFilterSearchResults:(e,t,n,a,l)=>new Promise(((e,t)=>{e(R)})),validateJql:(e,t,n)=>new Promise(((e,t)=>{e({errors:[]})})),createPullRequest:()=>{},viewPullRequest:()=>{},createJiraIssue:()=>{},viewJiraIssue:()=>{}},R={filters:[],isLast:!0,maxResults:25,offset:0,total:0},B=v.createContext(w),O=Object.assign(Object.assign({},h.j$),{isSomethingLoading:!1,openSection:A.AQ.Jira,openSubSections:[]});var j;function J(e,t){switch(t.type){case j.Init:return Object.assign(Object.assign(Object.assign({},e),t.data),{openSection:t.data.section?t.data.section:A.AQ.Jira,openSubSections:t.data.subSection?[t.data.subSection]:[],isSomethingLoading:!1,isErrorBannerOpen:!1,errorDetails:void 0});case j.SectionChange:return Object.assign(Object.assign({},e),{openSection:t.data.section?t.data.section:e.openSection,openSubSections:t.data.subSection?[t.data.subSection]:e.openSubSections,isSomethingLoading:!1,isErrorBannerOpen:!1,errorDetails:void 0});case j.LocalChange:return Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},e.config),t.changes)});case j.ConfigChange:return Object.assign(Object.assign({},e),{config:t.config,target:t.target,isSomethingLoading:!1,isErrorBannerOpen:!1,errorDetails:void 0});case j.SitesUpdate:return Object.assign(Object.assign({},e),{jiraSites:t.jiraSites,bitbucketSites:t.bitbucketSites,isSomethingLoading:!1,isErrorBannerOpen:!1,errorDetails:void 0});case j.Loading:return Object.assign(Object.assign({},e),{isSomethingLoading:!0});default:return(0,k.y)(e,t)}}!function(e){e.Init="init",e.SectionChange="sectionChange",e.ConfigChange="configChange",e.Loading="loading",e.SitesUpdate="sitesUpdate",e.LocalChange="localChange"}(j||(j={}));var q=n(86231),$=n(95834),Q=n(82782),L=n(14944),N=n(91024),P=n(42561),T=n(30981),F=n(31783),W=n(96746),U=n(29287),z=n(6406);const V=({product:e})=>{const t=`Login to ${e.name} Cloud`,n=(0,v.useContext)(B);return v.createElement(W.A,{variant:"contained",color:"primary",startIcon:v.createElement(U.A,null),onClick:()=>(()=>{const t=e.key===z.IH.key?"atlassian.net":"bitbucket.org";n.login({host:t,product:e},{user:z.J8,state:z.sR.Valid})})()},t)};var D=n(56716),M=n(50384),_=n(61466),G=n(29514),H=n(91004),K=n(77430),Y=n(25196),X=n(42460),Z=n(48672),ee=n(73486),te=n(24711),ne=n(7756),ae=n(16064),le=n(88313),re=n(20053),ie=n(12785);const ce=(0,l.A)((e=>({box:{borderWidth:1,borderColor:e.palette.divider,borderStyle:"solid"}}))),oe=(0,l.A)((e=>({root:{flexGrow:1},iconStyle:{color:e.palette.grey[600]}})));const se=({sites:e,product:t,editServer:n})=>{const a=(0,v.useContext)(B),l=ce(),r=oe();return v.createElement("div",{className:(0,re.A)(r.root,l.box)},v.createElement(ee.A,null,function(e,t,n,a,l){const r=`images/${e.key}-icon.svg`;return t.length<1?[v.createElement(M.A,{key:"empty"},v.createElement(E.A,{width:"100%"},v.createElement(o.A,{align:"center"},"No sites found.")))]:t.map(((e,i)=>{const c=e.site.avatarUrl&&e.site.avatarUrl.length>0?e.site.avatarUrl:r;return v.createElement(v.Fragment,{key:(0,ie.Ld)(e,i)},v.createElement(M.A,{key:e.site.name},v.createElement(_.A,null,e.site.isCloud?v.createElement(U.A,{fontSize:"small",className:l}):v.createElement(D.A,{fontSize:"small",className:l})),v.createElement(G.A,null,v.createElement(H.A,{src:c},v.createElement(le.cJ,null))),v.createElement(K.A,{primary:e.site.name}),v.createElement(Y.A,null,e.auth.state===z.sR.Invalid&&v.createElement(u.Ay,{title:"Credential Error"},v.createElement(X.A,{edge:"end","aria-label":"error",onClick:()=>a(e)},v.createElement(ae.A,{fontSize:"small",color:"inherit"}))),!e.site.isCloud&&v.createElement(X.A,{edge:"end","aria-label":"edit",onClick:()=>a(e)},v.createElement(ne.A,{fontSize:"small",color:"inherit"})),v.createElement(X.A,{edge:"end","aria-label":"delete",onClick:()=>n(e.site)},v.createElement(te.A,{fontSize:"small",color:"inherit"})))),t.length!==i+1&&v.createElement(Z.A,null))}))}(t,e,a.logout,(e=>{const l=e.site;if(l.isCloud){a.logout(l);const e=t.key===z.IH.key?"atlassian.net":"bitbucket.org";a.login({host:e,product:t},{user:z.J8,state:z.sR.Valid})}else n(e)}),r.iconStyle)))};var me;!function(e){e.EnableRemoteAuthentication="atlascode-enable-remote-authentication"}(me||(me={}));var ue=n(17970);const de=(0,v.memo)((({product:e,isRemote:t,sites:n})=>{const a=(0,v.useContext)(g.y),l=(0,v.useCallback)((()=>{a.openDialog(e,void 0)}),[a,e]),r=(0,v.useCallback)((t=>{a.openDialog(e,t)}),[a,e]),[i,c]=v.useState(!1);return v.useEffect((()=>{window.addEventListener("message",(e=>{const t=e.data;if(t.command===ue.P.UpdateFeatureFlags){const e=t.featureFlags[me.EnableRemoteAuthentication];console.log(`FeatureGates: received by SiteAuthenticator - ${me.EnableRemoteAuthentication} -> ${e}`),c(e)}}))}),[]),v.createElement(E.A,{flexGrow:1},v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(b.A,{item:!0,hidden:!1===t||i},v.createElement(o.A,null,v.createElement(E.A,{component:"span",fontWeight:"fontWeightBold"},"\u26a0\ufe0f Authentication cannot be done while running remotely")),v.createElement(o.A,null,"To authenticate with a new site open this (or another) workspace locally. Accounts added when running locally ",v.createElement("em",null,"will")," be accessible during remote development.")),v.createElement(b.A,{item:!0,style:{cursor:t&&!i?"not-allowed":"default"}},v.createElement(b.A,{container:!0,direction:"column",spacing:2,style:{pointerEvents:t&&!i?"none":"inherit",opacity:t&&!i?.6:"inherit"}},v.createElement(b.A,{item:!0},v.createElement(b.A,{container:!0,spacing:2},v.createElement(b.A,{item:!0},v.createElement(V,{product:e})),v.createElement(b.A,{item:!0},v.createElement(W.A,{color:"primary",startIcon:v.createElement(D.A,null),onClick:l},`Add Custom ${e.name} Site`)))),v.createElement(b.A,{item:!0},v.createElement(se,{product:e,sites:n,editServer:r}))))))})),be=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,isRemote:a,sites:l,product:r,section:i})=>{const[c,o]=(0,v.useState)(t),s=(0,v.useCallback)(((e,t)=>{o(t),n(A.IS.Auth,t)}),[n]);return(0,v.useEffect)((()=>{o((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:c,onChange:s},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${i}-${A.IS.Auth}-content`,id:`${i}-${A.IS.Auth}-header`},v.createElement(F.x,null,"Authentication"),v.createElement(T.n,null,"authenticate with ",r.name," instances")),v.createElement(N.A,null,v.createElement(de,{product:r,isRemote:a,sites:l})))}));var pe=n(2948),Ee=n(64794),ge=n(44041),he=n(8728);const Ae=(0,l.A)((e=>({root:{width:250},input:{width:48},label:{"&$disabled":{color:e.palette.text.disabled}},disabled:{}}))),fe=(0,v.memo)((({interval:e,enabled:t,max:n,label:a,units:l,onChange:r,className:i})=>{const c=Ae(),[s,m]=v.useState(e),[u,d]=v.useState(void 0),p=(0,v.useMemo)((()=>void 0!==l?l:"seconds"),[l]),E=(0,v.useCallback)((e=>{m(e),d(e)}),[m,d]);return(0,v.useEffect)((()=>{m(e)}),[e]),(0,v.useEffect)((()=>{r&&void 0!==u&&r(u)}),[r,u]),v.createElement(b.A,{className:i,container:!0,spacing:4,alignItems:"center"},v.createElement(b.A,{item:!0},v.createElement(o.A,{component:"span",className:(0,re.A)(c.label,{[c.disabled]:!t})},a)),v.createElement(b.A,{item:!0},v.createElement("div",{className:c.root},v.createElement(b.A,{container:!0,spacing:2,alignItems:"center"},v.createElement(b.A,{item:!0,xs:!0},v.createElement(ge.A,{max:n,disabled:!t,value:"number"===typeof s?s:0,valueLabelDisplay:"auto",getAriaValueText:(e,t)=>`${e}`,onChange:(e,t)=>{"number"===typeof t&&m(t)},onChangeCommitted:(e,t)=>{"number"===typeof t&&d(t)}})),v.createElement(b.A,{item:!0},v.createElement(he.A,{disabled:!t,className:c.input,value:s,margin:"dense",onChange:e=>E(""===e.target.value?0:Number(e.target.value)),onBlur:()=>{s<0?E(0):s>n&&E(n)},inputProps:{step:5,min:0,max:n,type:"number"}})),v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"caption",className:(0,re.A)(c.label,{[c.disabled]:!t})},p))))))})),Ce=(0,l.A)((e=>({indent:{marginLeft:e.spacing(3)}}))),ve=(0,v.memo)((({enabled:e,notifications:t,jiraButton:n,refreshInterval:a})=>{const l=Ce(),r=(0,v.useContext)(B),[i,c]=(0,v.useState)({}),s=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.${e.target.value}`]=e.target.checked,c(t)}),[]),m=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.issues.refreshInterval`]=e,c(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(i).length>0&&(r.updateConfig(i),c({}))}),[i,r]),v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"bbIssuesExplorerEnabled",value:"issues.explorerEnabled",checked:e,onChange:s}),label:"Enable Bitbucket issues explorer",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{className:l.indent,size:"small",color:"primary",id:"bbIssuesMonitor",value:"issues.monitorEnabled",checked:t,disabled:!e,onChange:s}),label:"Show notifications when new Bitbucket issues are created",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{className:l.indent,size:"small",color:"primary",id:"bbCreateJiraIssues",value:"issues.createJiraEnabled",checked:n,disabled:!e,onChange:s}),label:"Show Create Jira Issue button on Bitbucket issue screens",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(b.A,{container:!0,direction:"row",spacing:1,alignItems:"center"},v.createElement(b.A,{item:!0},v.createElement(fe,{className:l.indent,interval:a,max:120,label:"Refresh explorer every:",enabled:e,units:"minutes",onChange:m})),v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"subtitle2"},"(setting to 0 disables auto-refresh)")))))})),ke=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enabled:a,notifications:l,jiraButton:r,refreshInterval:i})=>{const[c,o]=(0,v.useState)(t),s=(0,v.useCallback)(((e,t)=>{o(t),n(A.IS.Issues,t)}),[n]);return(0,v.useEffect)((()=>{o((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:c,onChange:s},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Bitbucket}-${A.IS.Issues}-content`,id:`${A.AQ.Bitbucket}-${A.IS.Issues}-header`},v.createElement(F.x,null,"Bitbucket Issues Explorer"),v.createElement(T.n,null,"configure the Bitbucket issues explorer and notifications")),v.createElement(N.A,null,v.createElement(ve,{enabled:a,notifications:l,jiraButton:r,refreshInterval:i})))})),ye=(0,v.memo)((({enabled:e})=>{const t=(0,v.useContext)(B);return v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"bitbucketContextMenusEnabled",checked:e,onChange:e=>{const n=Object.create(null);n["bitbucket.contextMenus.enabled"]=e.target.checked,t.updateConfig(n)}}),label:"Enable Bitbucket context menus in editor",spacing:1,variant:"body1"})})),Se=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enabled:a})=>{const[l,r]=(0,v.useState)(t),i=(0,v.useCallback)(((e,t)=>{r(t),n(A.IS.ContextMenus,t)}),[n]);return(0,v.useEffect)((()=>{r((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:l,onChange:i},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Bitbucket}-${A.IS.ContextMenus}-content`,id:`${A.AQ.Bitbucket}-${A.IS.ContextMenus}-header`},v.createElement(F.x,null,"Bitbucket Context Menus"),v.createElement(T.n,null,"configure the context menus in editor")),v.createElement(N.A,null,v.createElement(ye,{enabled:a})))})),xe=(0,l.A)((e=>({indent:{marginLeft:e.spacing(3)}}))),Ie=(0,v.memo)((({enabled:e,relatedJiraIssues:t,relatedBitbucketIssues:n,pullRequestCreated:a,nestFiles:l,refreshInterval:r})=>{const i=xe(),c=(0,v.useContext)(B),[s,m]=(0,v.useState)({}),u=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.${e.target.value}`]=e.target.checked,m(t)}),[]),d=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.explorer.refreshInterval`]=e,m(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(s).length>0&&(c.updateConfig(s),m({}))}),[s,c]),v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"bbExplorerEnabled",value:"explorer.enabled",checked:e,onChange:u}),label:"Enable Bitbucket pull requests explorer",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{className:i.indent,size:"small",color:"primary",id:"bbRelatedJiraIssues",value:"explorer.relatedJiraIssues.enabled",checked:t,disabled:!e,onChange:u}),label:"Show related Jira issues for Bitbucket pull requests",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{className:i.indent,size:"small",color:"primary",id:"bbRelatedBitbucketIssues",value:"explorer.relatedBitbucketIssues.enabled",checked:n,disabled:!e,onChange:u}),label:"Show related Bitbucket issues for pull requests",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{className:i.indent,size:"small",color:"primary",id:"bbpullRequestCreatedNotify",value:"explorer.notifications.pullRequestCreated",checked:a,disabled:!e,onChange:u}),label:"Show notifications when new Bitbucket pull requests are created",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{className:i.indent,size:"small",color:"primary",id:"bbNestFiles",value:"explorer.nestFiles",checked:l,disabled:!e,onChange:u}),label:"Nest modified files by folder",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(b.A,{container:!0,direction:"row",spacing:1,alignItems:"center"},v.createElement(b.A,{item:!0},v.createElement(fe,{className:i.indent,interval:r,max:120,label:"Refresh explorer every:",enabled:e,units:"minutes",onChange:d})),v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"subtitle2"},"(setting to 0 disables auto-refresh)")))))})),we=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enabled:a,relatedJiraIssues:l,relatedBitbucketIssues:r,pullRequestCreated:i,nestFiles:c,refreshInterval:o})=>{const[s,m]=(0,v.useState)(t),u=(0,v.useCallback)(((e,t)=>{m(t),n(A.IS.PR,t)}),[n]);return(0,v.useEffect)((()=>{m((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:s,onChange:u},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Bitbucket}-${A.IS.PR}-content`,id:`${A.AQ.Bitbucket}-${A.IS.PR}-header`},v.createElement(F.x,null,"Pull Requests Explorer"),v.createElement(T.n,null,"configure the pull requests explorer and notifications")),v.createElement(N.A,null,v.createElement(Ie,{enabled:a,relatedJiraIssues:l,relatedBitbucketIssues:r,pullRequestCreated:i,nestFiles:c,refreshInterval:o})))}));var Re=n(29252),Be=n.n(Re);const Oe=({enableItem:e,monitorItem:t,hideEmptyItem:n,hideFilteredItem:a,intervalItem:l})=>v.createElement(v.Fragment,null,e,t,n,a,l),je=(0,v.memo)((({filters:e,enabled:t})=>{const n=(0,v.useContext)(B),[a,l]=(0,v.useState)({}),r=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.pipelines.branchFilters`]=e,l(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(a).length>0&&(n.updateConfig(a),l({}))}),[a,n]),v.createElement(pe.Ig,{options:e,reverseButtons:!0,addOptionButtonContent:"Add Filter",disabled:!t,inputLabel:"Filter Text",onChange:r,emptyComponent:v.createElement(E.A,{width:"100%"},v.createElement(o.A,{align:"center"},"No filters found."))})})),Je=(0,l.A)((e=>({indent:{marginLeft:e.spacing(3)}}))),qe=(0,v.memo)((({enabled:e,hideEmpty:t,hideFiltered:n,monitorEnabled:a,refreshInterval:l,filters:r})=>{const i=Je(),c=ce(),s=(0,v.useContext)(B),[m,d]=(0,v.useState)({}),p=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.${e.target.value}`]=e.target.checked,d(t)}),[]),g=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.pipelines.refreshInterval`]=e,d(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(m).length>0&&(s.updateConfig(m),d({}))}),[m,s]),v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(Oe,{enableItem:v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(u.Ay,{title:"Enable pipelines Explorer"},v.createElement(Ee.A,{color:"primary",size:"small",value:"pipelines.explorerEnabled",checked:e,onChange:p})),label:"Enable pipelines Explorer",spacing:1,variant:"body1"})),monitorItem:v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(u.Ay,{title:"Enable notifications"},v.createElement(Ee.A,{className:i.indent,disabled:!e,color:"primary",size:"small",value:"pipelines.monitorEnabled",checked:a,onChange:p})),label:"Show notifications when new Bitbucket pipelines are created",spacing:1,variant:"body1"})),hideEmptyItem:v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(u.Ay,{title:"Show empty pipelines"},v.createElement(Ee.A,{className:i.indent,disabled:!e,color:"primary",size:"small",checked:t,value:"pipelines.hideEmpty",onChange:p})),label:"Hide Bitbucket pipelines with no results",spacing:1,variant:"body1"})),hideFilteredItem:v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(u.Ay,{title:"Enable filters"},v.createElement(Ee.A,{className:i.indent,disabled:!e,color:"primary",size:"small",checked:n,value:"pipelines.hideFiltered",onChange:p})),label:"Show only Bitbucket pipelines matching the filters below",spacing:1,variant:"body1"})),intervalItem:v.createElement(b.A,{item:!0},v.createElement(b.A,{container:!0,direction:"row",spacing:1,alignItems:"center"},v.createElement(b.A,{item:!0},v.createElement(fe,{className:i.indent,interval:l,max:120,label:"Refresh interval:",enabled:e,units:"minutes",onChange:g})),v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"subtitle2"},"(setting to 0 disables auto-refresh)"))))}),v.createElement(b.A,{item:!0},v.createElement(E.A,{marginTop:2},v.createElement(o.A,{variant:"h4"},"Pipeline Filters"),v.createElement(E.A,{className:c.box,marginTop:1,paddingBottom:2},v.createElement(je,{enabled:n,filters:r})))))})),$e=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enabled:a,hideEmpty:l,hideFiltered:r,monitorEnabled:i,refreshInterval:c,filters:o})=>{const[s,m]=(0,v.useState)(t),[u,d]=(0,v.useState)(o),b=(0,v.useCallback)(((e,t)=>{m(t),n(A.IS.Pipelines,t)}),[n]);return(0,v.useEffect)((()=>{d((e=>Be()(e,o)?e:o))}),[o]),(0,v.useEffect)((()=>{m((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:s,onChange:b},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Bitbucket}-${A.IS.Pipelines}-content`,id:`${A.AQ.Bitbucket}-${A.IS.Pipelines}-header`},v.createElement(F.x,null,"Bitbucket Pipelines Explorer"),v.createElement(T.n,null,"configure the Bitbucket pipelines explorer and notifications")),v.createElement(N.A,null,v.createElement(qe,{filters:u,enabled:a,hideEmpty:l,hideFiltered:r,monitorEnabled:i,refreshInterval:c})))})),Qe=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,preferredRemotes:a})=>{const l=ce(),r=(0,v.useContext)(B),[i,c]=(0,v.useState)(t),[s,m]=(0,v.useState)({}),u=(0,v.useCallback)(((e,t)=>{c(t),n(A.IS.PreferredRemotes,t)}),[n]);(0,v.useEffect)((()=>{c((e=>e!==t?t:e))}),[t]);const d=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Bitbucket}.preferredRemotes`]=e,m(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(s).length>0&&(r.updateConfig(s),m({}))}),[s,r]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:i,onChange:u},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Bitbucket}-${A.IS.PreferredRemotes}-content`,id:`${A.AQ.Bitbucket}-${A.IS.PreferredRemotes}-header`},v.createElement(F.x,null,"Preferred Git Remotes"),v.createElement(T.n,null,"configure the preferred remotes")),v.createElement(N.A,null,v.createElement(b.A,{container:!0,direction:"column"},v.createElement(o.A,null,"The first remote that matches the list will be used to fetch pull requests, issues, and pipelines. A random remote is chosen if a match is not found."),v.createElement(E.A,{className:l.box,marginTop:1,paddingBottom:2},v.createElement(pe.Ig,{options:a,optionsOrdered:!0,reverseButtons:!0,addOptionButtonContent:"Add remote",inputLabel:"Remote",disabled:!1,onChange:d,emptyComponent:v.createElement(E.A,{width:"100%"},v.createElement(o.A,{align:"center"},"No preferred remotes configured."))})))))}));var Le=n(19371);const Ne=({configSection:e,productName:t,enabled:n,showProduct:a,showUser:l,showLogin:r})=>{const i=(0,v.useContext)(B),[c,o]=(0,v.useState)({}),s=(0,v.useCallback)((t=>{const n=Object.create(null);n[`${e}.${t.target.value}`]=t.target.checked,o(n)}),[e]),m=!n;return(0,v.useEffect)((()=>{Object.keys(c).length>0&&(i.updateConfig(c),o({}))}),[c,i]),v.createElement(b.A,{container:!0,direction:"column"},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"statusbar.enabled",value:"statusbar.enabled",checked:n,onChange:s}),label:`Enable ${t} Status Bar`,spacing:1,variant:"body1"})),v.createElement(E.A,{marginLeft:2},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Le.A,{disabled:m,size:"small",color:"primary",id:"showProduct",value:"statusbar.showProduct",checked:a,onChange:s}),spacing:1,variant:"body1",label:"Show product name"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Le.A,{size:"small",disabled:m,color:"primary",id:"showUser",value:"statusbar.showUser",checked:l,onChange:s}),spacing:1,variant:"body1",label:"Show user's name"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Le.A,{size:"small",disabled:m,color:"primary",id:"showLogin",value:"statusbar.showLogin",checked:r,onChange:s}),spacing:1,variant:"body1",label:"Show login button when not authenticated"}))))},Pe=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,configSection:a,productName:l,enabled:r,showProduct:i,showUser:c,showLogin:o})=>{const[s,m]=(0,v.useState)(t),u=(0,v.useCallback)(((e,t)=>{m(t),n(A.IS.Status,t)}),[n]);return(0,v.useEffect)((()=>{m((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:s,onChange:u},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${a}-${A.IS.Auth}-content`,id:`${a}-${A.IS.Auth}-header`},v.createElement(F.x,null,"Status Bar"),v.createElement(T.n,null,`configure the status bar display for ${l}`)),v.createElement(N.A,null,v.createElement(Ne,{configSection:a,productName:l,enabled:r,showProduct:i,showUser:c,showLogin:o})))})),Te=({visible:e,selectedSubSections:t,onSubsectionChange:n,config:a,sites:l,isRemote:r})=>v.createElement(v.Fragment,null,v.createElement($.A,{in:e},v.createElement("div",{hidden:!e||a["bitbucket.enabled"]},"Enable Bitbucket features to see settings")),v.createElement($.A,{in:e},v.createElement("div",{hidden:!e||!a["bitbucket.enabled"],role:"tabpanel"},v.createElement(b.A,{container:!0,spacing:3,direction:"column"},v.createElement(b.A,{item:!0},v.createElement(be,{visible:e,expanded:t.includes(A.IS.Auth),onSubsectionChange:n,isRemote:r,sites:l,product:z.Bg,section:A.AQ.Bitbucket})),v.createElement(b.A,{item:!0},v.createElement(we,{visible:e,expanded:t.includes(A.IS.PR),onSubsectionChange:n,enabled:a[`${A.AQ.Bitbucket}.explorer.enabled`],relatedJiraIssues:a[`${A.AQ.Bitbucket}.explorer.relatedJiraIssues.enabled`],relatedBitbucketIssues:a[`${A.AQ.Bitbucket}.explorer.relatedBitbucketIssues.enabled`],pullRequestCreated:a[`${A.AQ.Bitbucket}.explorer.notifications.pullRequestCreated`],nestFiles:a[`${A.AQ.Bitbucket}.explorer.nestFilesEnabled`],refreshInterval:a[`${A.AQ.Bitbucket}.explorer.refreshInterval`]})),v.createElement(b.A,{item:!0},v.createElement($e,{visible:e,expanded:t.includes(A.IS.Pipelines),onSubsectionChange:n,enabled:a[`${A.AQ.Bitbucket}.pipelines.explorerEnabled`],hideEmpty:a[`${A.AQ.Bitbucket}.pipelines.hideEmpty`],hideFiltered:a[`${A.AQ.Bitbucket}.pipelines.hideFiltered`],monitorEnabled:a[`${A.AQ.Bitbucket}.pipelines.monitorEnabled`],filters:a[`${A.AQ.Bitbucket}.pipelines.branchFilters`],refreshInterval:a[`${A.AQ.Bitbucket}.pipelines.refreshInterval`]})),v.createElement(b.A,{item:!0},v.createElement(ke,{visible:e,expanded:t.includes(A.IS.Issues),onSubsectionChange:n,enabled:a[`${A.AQ.Bitbucket}.issues.explorerEnabled`],notifications:a[`${A.AQ.Bitbucket}.issues.monitorEnabled`],jiraButton:a[`${A.AQ.Bitbucket}.issues.createJiraEnabled`],refreshInterval:a[`${A.AQ.Bitbucket}.issues.refreshInterval`]})),v.createElement(b.A,{item:!0},v.createElement(Qe,{visible:e,expanded:t.includes(A.IS.PreferredRemotes),onSubsectionChange:n,preferredRemotes:a[`${A.AQ.Bitbucket}.preferredRemotes`]})),v.createElement(b.A,{item:!0},v.createElement(Se,{visible:e,expanded:t.includes(A.IS.ContextMenus),onSubsectionChange:n,enabled:a[`${A.AQ.Bitbucket}.contextMenus.enabled`]})),v.createElement(b.A,{item:!0},v.createElement(Pe,{visible:e,expanded:t.includes(A.IS.Status),onSubsectionChange:n,configSection:A.AQ.Bitbucket,productName:z.Bg.name,enabled:a[`${A.AQ.Bitbucket}.statusbar.enabled`],showProduct:a[`${A.AQ.Bitbucket}.statusbar.showProduct`],showUser:a[`${A.AQ.Bitbucket}.statusbar.showUser`],showLogin:a[`${A.AQ.Bitbucket}.statusbar.showLogin`]}))))));var Fe=n(9603),We=n(13154),Ue=n(46158),ze=n(19773),Ve=n(22488);const De=(0,l.A)((e=>({button:{width:"100%",height:"100%",textTransform:"none",padding:e.spacing(3),backgroundColor:"dark"===e.palette.type?(0,ze.a)(e.palette.background.paper,.05):(0,ze.e$)(e.palette.background.paper,.05),color:e.palette.text.primary,"&:hover":{color:e.palette.text.primary,backgroundColor:"dark"===e.palette.type?(0,ze.a)(e.palette.background.paper,.2):(0,ze.e$)(e.palette.background.paper,.2)}},gifBox:{maxWidth:"100%",maxHeight:"auto",borderWidth:3,borderStyle:"solid",borderColor:"DeepSkyBlue",borderRadius:3}}))),Me=({gifLink:e,label:t,description:n,productIcon:a,action:l,onClick:r,actionNotAvailable:i})=>{const c=De(),[s,m]=(0,v.useState)(!1),u=(0,v.useCallback)((()=>{r(e,t,n,l,i)}),[r,e,t,n,l,i]),d=(0,v.useCallback)((()=>{m(!0)}),[]);return v.createElement(W.A,{className:c.button,onClick:u},v.createElement(b.A,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start"},v.createElement(b.A,{item:!0,xs:12},v.createElement(o.A,{variant:"h4",align:"left"},t," ",a)),v.createElement(b.A,{item:!0,xs:12},v.createElement(Z.A,null)),v.createElement(b.A,{item:!0,lg:3,md:6,sm:12,xs:12},v.createElement(E.A,{hidden:s},v.createElement(Ve.A,{variant:"rect",width:"100%",height:"200px"})),v.createElement(E.A,{hidden:!s},v.createElement("img",{"aria-label":`Gif showing "${n}" action`,className:c.gifBox,src:e,onLoad:d}))),v.createElement(b.A,{item:!0,lg:9,md:6,sm:12,xs:12},v.createElement(o.A,{variant:"body1",align:"left"},n))))},_e=(0,l.A)((e=>({code:{backgroundColor:"rgb(220, 220, 220)",color:"rgb(208, 66, 103)",borderRadius:5,margin:e.spacing(0,1),padding:e.spacing(0,1)},linkified:{"&:hover":{backgroundColor:"white"}}}))),Ge=({visible:e,config:t,sectionChanger:n})=>{const a=_e(),l=(0,v.useContext)(B),[r,i]=(0,v.useState)(!1),[c,o]=(0,v.useState)(""),[s,m]=(0,v.useState)(""),[u,d]=(0,v.useState)(),[p,E]=(0,v.useState)((()=>()=>{})),[g,h]=(0,v.useState)(!1),f=(0,v.useCallback)(((e,t,n,a,l)=>{o(t),m(e),d(n),E((()=>a)),h(l),i(!0)}),[]),C=(0,v.useCallback)((()=>{i(!1)}),[]),k=(0,v.useCallback)((()=>{p()}),[p]),y=(0,v.useCallback)((e=>{e.stopPropagation(),i(!1),n(A.AQ.Jira,A.IS.Triggers)}),[n]),S=(0,v.useCallback)((e=>{e.stopPropagation(),i(!1),n(A.AQ.Jira,A.IS.Issues)}),[n]);return v.createElement(v.Fragment,null,v.createElement(Ue.E,{modalTitle:c,modalGifLink:s,modalDescription:u,modalVisibility:r,onClose:C,action:k,actionNotAvailable:g}),v.createElement($.A,{in:e},v.createElement("div",{hidden:!e,role:"tabpanel"},v.createElement(b.A,{container:!0,spacing:3,direction:"column"},v.createElement(b.A,{item:!0,hidden:!t["jira.enabled"]},v.createElement(Me,{gifLink:"https://product-integrations-cdn.atl-paas.net/atlascode/CreateIssueFromTodo.gif",label:"Create a Jira issue from a code comment",description:v.createElement(v.Fragment,null,"Adding a trigger to your code comments will bring up a"," ",v.createElement("code",{className:a.code},"Create Jira Issue")," code lens action. Pressing this button brings up an issue creation screen with the description already filled in with the contents of the comment. These triggers are configurable in the extension settings under"," ",v.createElement("code",{className:[a.code,a.linkified].join(" "),onClick:y},"Jira > Create Jira Issue Triggers > Comment Triggers")),productIcon:v.createElement(le.cJ,{style:{float:"right",color:"#0052CC"}}),action:()=>{},onClick:f,actionNotAvailable:!0})),v.createElement(b.A,{item:!0,hidden:!t["jira.enabled"]},v.createElement(Me,{gifLink:"https://product-integrations-cdn.atl-paas.net/atlascode/StartWorkTutorial.gif",label:"Start Work from a Jira issue",description:v.createElement(v.Fragment,null,"When viewing a Jira issue, pressing"," ",v.createElement("code",{className:a.code},"Start Work")," will open the"," ",v.createElement("code",{className:a.code},"Start Work Screen.")," From here you can"," ",v.createElement("b",null,"assign the issue to yourself, transition the issue's status, and create (and checkout) a branch")," ","for this issue all in ",v.createElement("b",null,"one click!")),productIcon:v.createElement(v.Fragment,null,v.createElement(We.A,{color:"primary",style:{float:"right",color:"#0052CC"}}),v.createElement(le.cJ,{style:{float:"right",color:"#0052CC"}})),action:()=>{},onClick:f,actionNotAvailable:!0})),v.createElement(b.A,{item:!0,hidden:!t["jira.enabled"]},v.createElement(Me,{gifLink:"https://product-integrations-cdn.atl-paas.net/atlascode/CreateJiraIssue.gif",label:"Create a Jira issue",description:v.createElement(v.Fragment,null,"Jira issues can be created by pressing the"," ",v.createElement("code",{className:a.code},"Create issue...")," button in the"," ",v.createElement("code",{className:a.code},"JIRA ISSUES"),"explorer. This will open a view that resembles the issue creation process on the Jira website."),productIcon:v.createElement(le.cJ,{style:{float:"right",color:"#0052CC"}}),action:l.createJiraIssue,onClick:f})),v.createElement(b.A,{item:!0,hidden:!t["jira.enabled"]},v.createElement(Me,{gifLink:"https://product-integrations-cdn.atl-paas.net/atlascode/ReviewJiraIssue.gif",label:"View a Jira issue",description:v.createElement(v.Fragment,null,"Jira issues show up in the ",v.createElement("code",{className:a.code},"JIRA ISSUES")," ","explorer and are grouped by JQL queries/filters. The issues which show up are configurable in the extension settings under"," ",v.createElement("code",{className:[a.code,a.linkified].join(" "),onClick:S},"Jira > Jira Issues Explorer > Filters and Custom JQL."),"To view an issue, expand a filter and click on the issue."),productIcon:v.createElement(le.cJ,{style:{float:"right",color:"#0052CC"}}),action:l.viewJiraIssue,onClick:f})),v.createElement(b.A,{item:!0,hidden:!t["bitbucket.enabled"]},v.createElement(Me,{gifLink:"https://product-integrations-cdn.atl-paas.net/atlascode/CreatePullRequest.gif",label:"Create a pull request",description:v.createElement(v.Fragment,null,"Bitbucket pull requests can be created by pressing the"," ",v.createElement("code",{className:a.code},"Create pull request..."),"button in the ",v.createElement("code",{className:a.code},"BITBUCKET PULL REQUESTS")," ","explorer. This will open a view that resembles the pull request creation process on the Bitbucket website."),productIcon:v.createElement(We.A,{color:"primary",style:{float:"right",color:"#0052CC"}}),action:l.createPullRequest,onClick:f})),v.createElement(b.A,{item:!0,hidden:!t["bitbucket.enabled"]},v.createElement(Me,{gifLink:"https://product-integrations-cdn.atl-paas.net/atlascode/ReviewAndApprovePullRequest.gif",label:"Review a pull request",description:v.createElement(v.Fragment,null,"Bitbucket pull request show up in the"," ",v.createElement("code",{className:a.code},"BITBUCKET PULL REQUESTS")," explorer and are grouped by repository. Expanding a pull request will reveal a"," ",v.createElement("code",{className:a.code},"Details")," node nodes for each affected file. Clicking the ",v.createElement("code",{className:a.code},"Details")," node will open a WebView with an overview of the pull request. Clicking the file nodes will show a diff for that file with inline comments from Bitbucket."),productIcon:v.createElement(We.A,{color:"primary",style:{float:"right",color:"#0052CC"}}),action:l.viewPullRequest,onClick:f}))))))},He=(0,v.memo)((({enableHttpsTunnel:e,offlineMode:t,onlineCheckerUrls:n})=>{const a=(0,v.useContext)(B),[l,r]=(0,v.useState)({}),i=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${e.target.value}`]=e.target.checked,r(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(l).length>0&&(a.updateConfig(l),r({}))}),[l,a]),v.createElement(b.A,{container:!0,direction:"column",spacing:3},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"enableHttpsTunnel",value:"enableHttpsTunnel",checked:e,onChange:i}),label:"Enable https tunneling for proxies that only have an http endpoint",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"offlineMode",value:"offlineMode",checked:t,onChange:i}),label:"Enable offline mode if you are without an internet connection to minimize errors",spacing:1,variant:"body1"})))})),Ke=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enableHttpsTunnel:a,offlineMode:l,onlineCheckerUrls:r})=>{const[i,c]=(0,v.useState)(t),o=(0,v.useCallback)(((e,t)=>{c(t),n(A.IS.Connectivity,t)}),[n]);return(0,v.useEffect)((()=>{c((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:i,onChange:o},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.General}-${A.IS.Connectivity}-content`,id:`${A.AQ.General}-${A.IS.Connectivity}-header`},v.createElement(F.x,null,"Connectivity"),v.createElement(T.n,null,"configure general connectivity settings")),v.createElement(N.A,null,v.createElement(He,{enableHttpsTunnel:a,offlineMode:l,onlineCheckerUrls:r})))}));var Ye=n(10782),Xe=n(82247);const Ze=(0,l.A)((e=>({box:{marginLeft:e.spacing(3),paddingLeft:e.spacing(3),paddingRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(1),borderWidth:1,borderColor:e.palette.divider,borderStyle:"solid"},hidden:{display:"none"}})));const et=(0,v.memo)((({enableCurl:e,enableCharles:t,charlesCertPath:n,charlesDebugOnly:a,showCreateIssueProblems:l})=>{const r=(0,v.useContext)(B),i=Ze(),[c,s]=(0,v.useState)({}),m=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${e.target.value}`]=e.target.checked,s(t)}),[]),d=(0,v.useCallback)((e=>{if(e.target.files&&e.target.files.length>0){const t=Object.create(null);t.charlesCertPath=function(e){const{webkitRelativePath:t}=e;return Object.defineProperty(e,"path",{value:"string"===typeof t&&t.length>0?t:e.name,writable:!1,configurable:!1,enumerable:!0}),e}(e.target.files[0]).path,s(t)}}),[]),p=(0,v.useCallback)((e=>{const t=Object.create(null);t.charlesCertPath=e,s(t)}),[]),E=(0,v.useMemo)((()=>v.createElement("div",null,v.createElement("input",{className:i.hidden,id:"cert-path-button",type:"file",onChange:d}),v.createElement("label",{htmlFor:"cert-path-button"},v.createElement(u.Ay,{title:"Choose Certificate File"},v.createElement(X.A,{component:"span"},v.createElement(Xe.A,{fontSize:"small",color:"inherit"})))))),[i.hidden,d]);return(0,v.useEffect)((()=>{Object.keys(c).length>0&&(r.updateConfig(c),s({}))}),[c,n,r]),v.createElement(b.A,{container:!0,direction:"column",spacing:3},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"enableCurlLogging",value:"enableCurlLogging",checked:e,onChange:m}),label:"Output curl commands for every API call",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"showCreateIssueProblems",value:"jira.showCreateIssueProblems",checked:l,onChange:m}),label:"Show a link to view non-renderable fields on Jira create issue page",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"enableCharles",value:"enableCharles",checked:t,onChange:m}),label:"Enable Charles Web Debug Proxy",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement($.A,{in:t,timeout:1e3},v.createElement("div",{className:(0,re.A)(i.box,{[i.hidden]:!t})},v.createElement(b.A,{container:!0,direction:"column",spacing:3},v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"body1"},"When using Charles, you must"," ",v.createElement(Ye.A,{href:"https://www.charlesproxy.com/documentation/using-charles/ssl-certificates/"},"save the Charles Root Certificate")," ","and provide the absolute path to it here")),v.createElement(b.A,{item:!0},v.createElement(pe.wI,{fullWidth:!0,label:"Charles SSL Certificate Path",defaultValue:n,InputProps:{endAdornment:E},onSave:p})),v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"body1"},"You also need to"," ",v.createElement(Ye.A,{href:"https://www.charlesproxy.com/documentation/proxying/ssl-proxying/"},"specify the following hosts in Charles")," ","to have SSL proxying enabled for them."),v.createElement(ee.A,null,v.createElement(M.A,{key:"api.atlassian.com"},v.createElement(K.A,{primary:"api.atlassian.com"})),v.createElement(Z.A,null),v.createElement(M.A,{key:"auth.atlassian.com"},v.createElement(K.A,{primary:"auth.atlassian.com"})),v.createElement(Z.A,null),v.createElement(M.A,{key:"api.bitbucket.org"},v.createElement(K.A,{primary:"api.bitbucket.org"})),v.createElement(Z.A,null),v.createElement(M.A,{key:"bitbucket.org"},v.createElement(K.A,{primary:"bitbucket.org"})),v.createElement(Z.A,null),v.createElement(M.A,{key:"as.atlassian.com"},v.createElement(K.A,{primary:"as.atlassian.com"})),v.createElement(Z.A,null))),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"charelsDebugOnly",value:"charlesDebugOnly",checked:a,onChange:m}),label:"Only enable Charles when debugging this extension (internal use)",spacing:1,variant:"body1"})))))))})),tt=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enableCurl:a,enableCharles:l,charlesCertPath:r,charlesDebugOnly:i,showCreateIssueProblems:c})=>{const[o,s]=(0,v.useState)(t),m=(0,v.useCallback)(((e,t)=>{s(t),n(A.IS.Debug,t)}),[n]);return(0,v.useEffect)((()=>{s((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:o,onChange:m},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.General}-${A.IS.Debug}-content`,id:`${A.AQ.General}-${A.IS.Debug}-header`},v.createElement(F.x,null,"Debugging"),v.createElement(T.n,null,"configure debugging tools")),v.createElement(N.A,null,v.createElement(et,{enableCurl:a,enableCharles:l,charlesCertPath:r,charlesDebugOnly:i,showCreateIssueProblems:c})))}));var nt,at=n(83220),lt=n(84630);!function(e){e.SILENT="silent",e.ERRORS="errors",e.INFO="info",e.DEBUG="debug"}(nt||(nt={}));const rt=(0,v.memo)((({showWelcome:e,helpExplorerEnabled:t,outputLevel:n})=>{const a=(0,v.useContext)(B),[l,r]=(0,v.useState)({}),i=(0,v.useCallback)((e=>{const t=Object.create(null);t.showWelcomeOnInstall=e.target.checked,r(t)}),[]),c=(0,v.useCallback)((e=>{const t=Object.create(null);t.helpExplorerEnabled=e.target.checked,r(t)}),[]),o=(0,v.useCallback)((e=>{const t=Object.create(null);t.outputLevel=e.target.value,r(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(l).length>0&&(a.updateConfig(l),r({}))}),[l,a]),v.createElement(b.A,{container:!0,direction:"column",spacing:3},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"showWelcome",checked:e,onChange:i}),label:"Show welcome screen when extension is updated",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"enableExplorer",checked:t,onChange:c}),label:"Enable Help Explorer",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(E.A,{width:200},v.createElement(at.A,{select:!0,fullWidth:!0,value:n,name:"outputLevel",id:"outputLevel",onChange:o,label:"Output Level"},v.createElement(lt.A,{key:nt.SILENT,value:nt.SILENT},nt.SILENT),v.createElement(lt.A,{key:nt.ERRORS,value:nt.ERRORS},nt.ERRORS),v.createElement(lt.A,{key:nt.INFO,value:nt.INFO},nt.INFO),v.createElement(lt.A,{key:nt.DEBUG,value:nt.DEBUG},nt.DEBUG)))))})),it=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,showWelcome:a,helpExplorerEnabled:l,outputLevel:r})=>{const[i,c]=(0,v.useState)(t),o=(0,v.useCallback)(((e,t)=>{c(t),n(A.IS.Misc,t)}),[n]);return(0,v.useEffect)((()=>{c((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:i,onChange:o},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.General}-${A.IS.Misc}-content`,id:`${A.AQ.General}-${A.IS.Misc}-header`},v.createElement(F.x,null,"Miscellaneous Settings"),v.createElement(T.n,null,"configure logging level, welcome screen, etc")),v.createElement(N.A,null,v.createElement(rt,{showWelcome:a,helpExplorerEnabled:l,outputLevel:r})))})),ct=(0,l.A)((e=>({root:{fontSize:e.typography.pxToRem(12),fontStyle:"italic"}}))),ot=({visible:e,selectedSubSections:t,onSubsectionChange:n,config:a})=>{const l=ct();return v.createElement(v.Fragment,null,v.createElement($.A,{in:e},v.createElement("div",{hidden:!e||!a["bitbucket.enabled"],role:"tabpanel"},v.createElement(b.A,{container:!0,spacing:3,direction:"column"},v.createElement(b.A,{item:!0},v.createElement(it,{visible:e,expanded:t.includes(A.IS.Misc),onSubsectionChange:n,showWelcome:a.showWelcomeOnInstall,helpExplorerEnabled:a.helpExplorerEnabled,outputLevel:a.outputLevel})),v.createElement(b.A,{item:!0},v.createElement(Ke,{visible:e,expanded:t.includes(A.IS.Misc),onSubsectionChange:n,enableHttpsTunnel:a.enableHttpsTunnel,offlineMode:a.offlineMode,onlineCheckerUrls:a.onlineCheckerUrls})),v.createElement(b.A,{item:!0},v.createElement(tt,{visible:e,expanded:t.includes(A.IS.Misc),onSubsectionChange:n,enableCurl:a.enableCurlLogging,enableCharles:a.enableCharles,charlesCertPath:a.charlesCertPath,charlesDebugOnly:a.charlesDebugOnly,showCreateIssueProblems:a["jira.showCreateIssueProblems"]}),v.createElement(E.A,{marginTop:5},v.createElement(o.A,{variant:"subtitle1",className:l.root},"Note: This extension collects telemetry data, which is used to help understand how to improve the product."),v.createElement(o.A,{variant:"subtitle1",className:l.root},"For example, this usage data helps to debug issues, such as slow start-up times, and to prioritize new features."),v.createElement(o.A,{variant:"subtitle1",className:l.root},"If you don't wish to send usage data to Atlassian, you can set the telemetry.enableTelemetry user setting to false, and restart VS Code."))),v.createElement(b.A,{item:!0})))))};var st=n(45538),mt=n(54866),ut=n(69060),dt=n(32118),bt=n(5696),pt=n(68016),Et=n(30240),gt=n(65816),ht=n(83182),At=n(87860),ft=n(65594),Ct=n(90652),vt=n(90648),kt=n(79764),yt=n(24896),St=n(93948),xt=n(3280),It=n(7084),wt=n(40410),Rt=n(86893),Bt=n(10476),Ot=n(31456),jt=n(19877),Jt=function(e,t,n,a){return new(n||(n=Promise))((function(l,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))};const qt=[{id:"name",disablePadding:!0,label:"Filter Name",align:"left"},{id:"owner",disablePadding:!1,label:"Owner",align:"left"},{id:"favorite",disablePadding:!1,label:"Favorite",align:"center"}],$t={filters:[],isLast:!0,maxResults:25,offset:0,total:0},Qt=(0,l.A)((e=>({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),marginBottom:e.spacing(2)},highlight:e=>({color:e.listActiveSelectionForeground,backgroundColor:e.listActiveSelectionBackground}),title:{flex:"1 1 100%"}}))),Lt=(0,l.A)((e=>({root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},container:{maxHeight:440}}))),Nt=({numSelected:e,inputText:t,setInputText:n,loading:a})=>{const l=(0,v.useContext)(Rt.Q),r=Qt(l);return v.createElement(c.A,{className:(0,re.A)(r.root,{[r.highlight]:e>0})},e>0?v.createElement(o.A,{className:r.title,color:"inherit",variant:"subtitle1"},e," selected"):v.createElement(o.A,{className:r.title,variant:"h6",id:"tableTitle"},"Jira Filters"),v.createElement(at.A,{label:"Search for filters",value:t,onChange:e=>n(e.target.value),fullWidth:!0,variant:"standard",InputProps:{startAdornment:v.createElement(v.Fragment,null,v.createElement(xt.A,{fontSize:"small"})),endAdornment:v.createElement(v.Fragment,null,a?v.createElement(ht.A,{color:"inherit",size:20}):null)}}))},Pt=({onSelectAllClick:e,numSelected:t,rowCount:n})=>v.createElement(At.A,null,v.createElement(ft.A,null,v.createElement(Ct.A,{padding:"checkbox"},v.createElement(Le.A,{indeterminate:t>0&&t<n,checked:n>0&&t===n,onChange:e,color:"primary"})),qt.map((e=>v.createElement(Ct.A,{key:e.id,align:e.align,padding:e.disablePadding?"none":"default"},e.label))))),Tt=({site:e,onSelected:t})=>{const n=Lt(),[a,l]=(0,v.useState)([]),[r,i]=v.useState(0),[c,o]=v.useState(0),s=(0,v.useContext)(B),{inputText:m,setInputText:u,filterSearch:d}=((e,t,n=0,a)=>{const[l,r]=(0,v.useState)(""),i=(0,jt.A)((()=>(0,Bt.A)(((e,t,n,a,l,r)=>Jt(void 0,void 0,void 0,(function*(){return yield e(t,n,a,l,r)}))),300,{leading:!0}))),c=(0,Ot.useAsyncAbortable)((r=>Jt(void 0,void 0,void 0,(function*(){return i(e,t,l,a,n,r)}))),[l,t,n,a],{setLoading:e=>Object.assign(Object.assign({},e),{loading:!0})});return{inputText:l,setInputText:r,filterSearch:c}})(s.fetchFilterSearchResults,e,c,25),b=d.result?d.result:$t;return(0,v.useEffect)((()=>{i(0),o(0)}),[e]),(0,v.useEffect)((()=>{t&&t(a)}),[t,a]),v.createElement("div",{className:n.root},v.createElement(p.A,{className:n.paper},v.createElement(Nt,{numSelected:a.length,inputText:m,setInputText:u,loading:d.loading}),v.createElement(vt.A,{className:n.container},v.createElement(kt.A,{stickyHeader:!0,size:"small"},v.createElement(Pt,{numSelected:a.length,onSelectAllClick:e=>{if(e.target.checked){const e=[...b.filters];l(e)}else l([])},rowCount:b.filters.length}),v.createElement(yt.A,null,b.filters.map(((e,t)=>{const n=(r=e.id,-1!==a.findIndex((e=>e.id===r)));var r;const i=`enhanced-table-checkbox-${t}`,c=e.favorite?v.createElement(It.A,null):v.createElement(wt.A,null);return v.createElement(ft.A,{hover:!0,onClick:t=>((e,t)=>{const n=a.findIndex((e=>e.id===t.id));let r=[];-1===n?r=r.concat(a,t):0===n?r=r.concat(a.slice(1)):n===a.length-1?r=r.concat(a.slice(0,-1)):n>0&&(r=r.concat(a.slice(0,n),a.slice(n+1))),l(r)})(0,e),role:"checkbox","aria-checked":n,tabIndex:-1,key:e.id,selected:n},v.createElement(Ct.A,{padding:"checkbox"},v.createElement(Le.A,{checked:n,inputProps:{"aria-labelledby":i},color:"primary"})),v.createElement(Ct.A,{component:"th",id:i,scope:"row",padding:"none"},e.name),v.createElement(Ct.A,null,e.owner),v.createElement(Ct.A,{align:"center"},c))}))))),v.createElement(St.A,{rowsPerPageOptions:[25],component:"div",count:b.total,rowsPerPage:25,page:r,onPageChange:(e,t)=>{i(t),o(25*t)}})))},Ft=({open:e,sites:t,onCancel:n,onSave:a})=>{const[l,r]=(0,v.useState)(Array.isArray(t)&&t.length>0?t[0]:z.Rc),[i,c]=(0,v.useState)([]),s=(0,v.useCallback)((e=>{r(e)}),[]),m=(0,v.useCallback)((e=>{c(e)}),[]),u=(0,v.useCallback)((()=>{const e=i.map((e=>({id:(0,x.v4)(),siteId:l.id,filterId:e.id,name:e.name,query:e.jql,enabled:!0,monitor:!0})));a(e)}),[i,a,l]);return(0,v.useEffect)((()=>{t.length>0&&r(t[0])}),[t]),v.createElement(dt.A,{fullWidth:!0,maxWidth:"md",open:e,onClose:n},v.createElement(bt.A,null,v.createElement(o.A,{variant:"h4"},"Filter Search")),v.createElement(pt.A,null,v.createElement(Et.A,null,"Import Filters"),v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(b.A,{item:!0},v.createElement(le.xp,{name:"site",value:l.id,label:"Select a site",required:!0,sites:t,fullWidth:!0,onSiteChange:s})),v.createElement(b.A,{item:!0},v.createElement(Tt,{site:l,onSelected:m})))),v.createElement(gt.A,null,v.createElement(W.A,{onClick:u,variant:"contained",color:"primary",disabled:i.length<1},"Import Filters"),v.createElement(W.A,{onClick:n,color:"primary"},"Cancel")),v.createElement(E.A,{marginBottom:3}))};var Wt=n(48922),Ut=n(59282),zt=n(94276),Vt=n(17069);const Dt=(0,v.memo)((({id:e,name:t,enabled:n,monitor:a,filterId:l,toggleEnabled:r,toggleMonitor:i,handleEdit:c,handleDelete:s})=>{const m=n?`Disable ${t}`:`Enable ${t}`,d=l?v.createElement(u.Ay,{title:"Filter"},v.createElement(Wt.A,{fontSize:"small"})):v.createElement(u.Ay,{title:"JQL"},v.createElement(Ut.A,{fontSize:"small"}));return v.createElement(b.A,{container:!0,direction:"row",spacing:1},v.createElement(b.A,{item:!0},d),v.createElement(b.A,{item:!0},v.createElement(u.Ay,{title:m},v.createElement(Ee.A,{id:e,color:"primary",checked:n,size:"small",onChange:r}))),v.createElement(b.A,{item:!0},v.createElement(o.A,null,t)),v.createElement(b.A,{item:!0},v.createElement(Y.A,null,!l&&v.createElement(u.Ay,{title:`Edit ${t}`},v.createElement(X.A,{id:e,edge:"end","aria-label":"edit",onClick:c},v.createElement(ne.A,{fontSize:"small",color:"inherit"}))),v.createElement(u.Ay,{title:`Delete ${t}`},v.createElement(X.A,{id:e,edge:"end","aria-label":"delete",onClick:s},v.createElement(te.A,{fontSize:"small",color:"inherit"}))),v.createElement(u.Ay,{title:"Inlclude in issue notifications"},v.createElement(Ee.A,{id:e,color:"primary",checked:a,size:"small",checkedIcon:v.createElement(zt.A,{fontSize:"small"}),icon:v.createElement(Vt.A,{fontSize:"small"}),onChange:i})))))}));var Mt=n(14435),_t=n(57912),Gt=n(30934);const Ht=(0,v.memo)((({openJqlDialog:e,openFilterDialog:t})=>{const[n,a]=(0,v.useState)(!1),l=(0,v.useCallback)((()=>{a(!1)}),[a]),r=(0,v.useCallback)((()=>{a(!0)}),[a]),i=(0,v.useCallback)((()=>{e(!0)}),[e]),c=(0,v.useCallback)((()=>{t(!0)}),[t]);return v.createElement(Mt.A,{ariaLabel:"Add issue list",icon:v.createElement(Gt.A,null),onClose:l,onOpen:r,open:n,direction:"left"},v.createElement(_t.A,{key:"addJQL",icon:v.createElement(Ut.A,{fontSize:"small"}),tooltipTitle:"Add JQL",onClick:i}),v.createElement(_t.A,{key:"addFilter",icon:v.createElement(Wt.A,{fontSize:"small"}),tooltipTitle:"Import Filter",onClick:c}))}));var Kt=n(5676),Yt=function(e,t,n,a){return new(n||(n=Promise))((function(l,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))};var Xt=function(e,t,n,a){return new(n||(n=Promise))((function(l,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((a=a.apply(e,t||[])).next())}))};const Zt={visibleFieldNames:[],visibleFunctionNames:[],jqlReservedWords:[]},en=({open:e,sites:t,jqlEntry:n,onCancel:a,onSave:l})=>{const r=(0,v.useContext)(B),[i,c]=(0,v.useState)(Array.isArray(t)&&t.length>0?t[0]:z.Rc),s=(0,Ot.useAsync)((()=>Xt(void 0,void 0,void 0,(function*(){return yield r.fetchJqlOptions(i)}))),[i]),{register:m,handleSubmit:u,errors:d,formState:p,control:g}=(0,Kt.mN)({mode:"onChange"}),h=(e=>{const t=(0,v.useContext)(B),n=(0,v.useRef)(),a=(0,jt.A)((()=>(0,Bt.A)(((e,n,a)=>Yt(void 0,void 0,void 0,(function*(){return yield t.validateJql(e,n,a)}))),300,{leading:!1})));return(0,v.useCallback)((t=>Yt(void 0,void 0,void 0,(function*(){n.current&&n.current.abort();const l=new AbortController;n.current=l;try{return yield a(e,t,l.signal)}finally{n.current===l&&(n.current=void 0)}}))),[a,e])})(i);m("jql",{validate:e=>Xt(void 0,void 0,void 0,(function*(){if(e){const t=yield h(e);return t.errors.length>0?t.errors.join(","):void 0}}))});const A=(0,v.useCallback)(((e,t,n,a)=>Xt(void 0,void 0,void 0,(function*(){return yield r.fetchJqlSuggestions(i,e,t,n,a)}))),[r,i]),f=(0,v.useCallback)((e=>{c(e)}),[]),C=(0,v.useCallback)((e=>{var t=n||{id:(0,x.v4)(),siteId:"",name:"",query:"",enabled:!0,monitor:!0},a=Object.assign({},t,{siteId:e.site,name:e.name,query:e.jql||(null===n||void 0===n?void 0:n.query)});l(a)}),[n,l]);return(0,v.useEffect)((()=>{t.length>0&&c(t[0])}),[t]),(0,v.useEffect)((()=>{if(n){var e=t.find((e=>e.id===n.siteId));e&&c(e)}}),[n,t]),v.createElement(dt.A,{fullWidth:!0,maxWidth:"md",open:e,onClose:a},v.createElement(bt.A,null,v.createElement(o.A,{variant:"h4"},"JQL Editor")),v.createElement(pt.A,null,v.createElement(Et.A,null,"Configure JQL Entry"),v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(b.A,{item:!0},v.createElement(at.A,{required:!0,id:"name",name:"name",label:"Name",defaultValue:n?n.name:"",helperText:d.name?d.name.message:void 0,fullWidth:!0,error:!!d.name,inputRef:m({required:"Name is required"})})),v.createElement(b.A,{item:!0},v.createElement(Kt.xI,{control:g,name:"site",sites:t,defaultValue:i.id,as:v.createElement(le.xp,{label:"Select a site",required:!0,error:!!d.site,sites:t,helperText:d.site?d.site.message:"",fullWidth:!0,onSiteChange:f})})),v.createElement(b.A,{item:!0},v.createElement("div",null,v.createElement(Kt.xI,{control:g,name:"jql",as:v.createElement(le.cR,{defaultValue:n?n.query:"",loading:s.loading,disabled:s.loading,required:!0,id:"jql",name:"jql",label:"Enter JQL",fullWidth:!0,jqlAutocompleteRestData:s.result?s.result:Zt,suggestionFetcher:A,helperText:d.jql?d.jql.message:void 0,error:!!d.jql})}))))),v.createElement(gt.A,null,v.createElement(W.A,{disabled:!p.isValid,onClick:u(C),variant:"contained",color:"primary"},"Save JQL"),v.createElement(W.A,{onClick:a,color:"primary"},"Cancel")),v.createElement(E.A,{marginBottom:3}))},tn=(0,l.A)((e=>({root:{flexGrow:1},paper:{backgroundColor:"dark"===e.palette.type?(0,ze.a)(e.palette.background.paper,.05):(0,ze.e$)(e.palette.background.paper,.05)}}))),nn=(0,v.memo)((({sites:e,jqlList:t})=>{const n=tn(),a=(0,v.useContext)(B),[l,r]=(0,v.useState)(t),[i,c]=(0,v.useState)(!1),[s,m]=(0,v.useState)(void 0),u=(0,v.useCallback)((e=>{const t=Object.create(null);t["jira.jqlList"]=e,a.updateConfig(t)}),[a]),d=(0,v.useCallback)((e=>{r((t=>{const n=t.findIndex((t=>t.id===e.id));if(c(!0),n<0)return[...t,e];{const a=[...t];return a[n]=e,a}}))}),[]),g=(0,v.useCallback)((e=>{r((t=>{const n=t.map((e=>e.filterId)),a=e.filter((e=>!n.includes(e.filterId)));return a.length>0?(c(!0),[...t,...a]):t}))}),[]),{openJqlDialog:h,jqlDialog:A}=((e,t)=>{const[n,a]=(0,v.useState)(!1),[l,r]=(0,v.useState)(void 0),i=(0,v.useCallback)(((e,t)=>{r(t),a(e)}),[]),c=(0,v.useCallback)((()=>{r(void 0),a(!1)}),[]),o=(0,v.useCallback)((e=>{t(e),r(void 0),a(!1)}),[t]);return{openJqlDialog:i,jqlDialog:(0,v.useMemo)((()=>v.createElement(en,{jqlEntry:l,onCancel:c,onSave:o,open:n,sites:e})),[c,o,l,n,e])}})(e,d),{openFilterDialog:f,filterDialog:C}=((e,t)=>{const[n,a]=(0,v.useState)(!1),l=(0,v.useCallback)((e=>{a(e)}),[]),r=(0,v.useCallback)((()=>{a(!1)}),[]),i=(0,v.useCallback)((e=>{t(e),a(!1)}),[t]);return{openFilterDialog:l,filterDialog:(0,v.useMemo)((()=>v.createElement(Ft,{onCancel:r,onSave:i,open:n,sites:e})),[r,i,n,e])}})(e,g),k=(0,v.useCallback)(((e,t)=>{r((n=>(c(!0),((e,t,n)=>{const a=[...e],[l]=a.splice(t,1);return a.splice(n,0,l),a})(n,e,t))))}),[]),y=(0,v.useCallback)((e=>{(0,ut.unstable_trace)("enabled button click",performance.now(),(()=>{r((t=>{const n=t.find((t=>t.id===e.target.id));return n?(n.enabled=e.target.checked,c(!0),[...t]):t}))}))}),[]),S=(0,v.useCallback)((e=>{(0,ut.unstable_trace)("monitor button click",performance.now(),(()=>{r((t=>{const n=t.find((t=>t.id===e.target.id));return n?(c(!0),n.monitor=e.target.checked,[...t]):t}))}))}),[]),x=(0,v.useCallback)((e=>{r((t=>{const n=t.findIndex((t=>t.id===e.currentTarget.id));return n>=0?(c(!0),t.splice(n,1),[...t]):t}))}),[]),I=(0,v.useCallback)((e=>{m(e.currentTarget.id)}),[]);return(0,v.useEffect)((()=>{if(s){const e=l.findIndex((e=>e.id===s));e>=0&&h(!0,l[e]),m(void 0)}}),[s,l,h]),(0,v.useEffect)((()=>{i&&(u(l),c(!1))}),[i,l,u]),(0,v.useEffect)((()=>{r((e=>Be()(e,t)?e:t))}),[t]),v.createElement("div",{className:n.root},v.createElement(b.A,{container:!0,direction:"column",spacing:1},v.createElement(b.A,{item:!0},v.createElement(p.A,{className:n.paper},v.createElement(pe.mX,{onReorder:k,dragIcon:v.createElement("span",null,v.createElement(mt.A,{color:"disabled"})),listItems:l.length>0?l.map(((e,t)=>v.createElement(Dt,{key:e.id,id:e.id,name:e.name,enabled:e.enabled,monitor:e.monitor,filterId:e.filterId,toggleEnabled:y,toggleMonitor:S,handleEdit:I,handleDelete:x}))):[v.createElement(E.A,{width:"100%"},v.createElement(o.A,{align:"center"},"No entries found."))]}))),v.createElement(b.A,{item:!0},v.createElement(E.A,{marginRight:4},v.createElement(Ht,{openJqlDialog:h,openFilterDialog:f})))),A,C)})),an=(0,l.A)((e=>({indent:{marginLeft:e.spacing(3)}}))),ln=(0,v.memo)((({enabled:e,nestSubtasks:t,fetchAllQueryResults:n,monitorEnabled:a,refreshInterval:l,sites:r,jqlList:i})=>{const c=an(),s=ce(),m=(0,v.useContext)(B),[d,p]=(0,v.useState)({}),g=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Jira}.${e.target.value}`]=e.target.checked,p(t)}),[]),h=(0,v.useCallback)((e=>{const t=Object.create(null);t[`${A.AQ.Jira}.explorer.refreshInterval`]=e,p(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(d).length>0&&(m.updateConfig(d),p({}))}),[d,m]),v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(b.A,{item:!0},v.createElement(st.q,null)),v.createElement(b.A,{item:!0},v.createElement(b.A,{container:!0,direction:"row",spacing:1},v.createElement(b.A,{item:!0},v.createElement(u.Ay,{title:"Enable Jira Explorer"},v.createElement(Ee.A,{size:"small",color:"primary",value:"explorer.enabled",checked:e,onChange:g}))),v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"body1"},"Enable Jira Explorer")))),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(u.Ay,{title:"Enable issue grouping"},v.createElement(Ee.A,{className:c.indent,disabled:!e,color:"primary",size:"small",value:"explorer.nestSubtasks",checked:t,onChange:g})),label:"Group issues by epic",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(u.Ay,{title:"Fetch all Results"},v.createElement(Ee.A,{className:c.indent,disabled:!e,color:"primary",size:"small",checked:n,value:"explorer.fetchAllQueryResults",onChange:g})),label:"Fetch all JQL query results (default is 100, enabling this could cause performance issues)",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(u.Ay,{title:"Enable Notifications"},v.createElement(Ee.A,{className:c.indent,disabled:!e,color:"primary",size:"small",checked:a,value:"explorer.monitorEnabled",onChange:g})),label:"Show notifications when new issues are created matching  the JQLs/Filters below",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(b.A,{container:!0,direction:"row",spacing:1,alignItems:"center"},v.createElement(b.A,{item:!0},v.createElement(fe,{className:c.indent,interval:l,max:120,label:"Refresh interval:",enabled:e,units:"minutes",onChange:h})),v.createElement(b.A,{item:!0},v.createElement(o.A,{variant:"subtitle2"},"(setting to 0 disables auto-refresh)")))),v.createElement(b.A,{item:!0},v.createElement(E.A,{marginTop:2},v.createElement(o.A,{component:"div",variant:"h4"},v.createElement(E.A,{display:"inline",fontWeight:"fontWeightBold"},"Filters and Custom JQL"),v.createElement(E.A,{display:"inline",marginLeft:3},v.createElement(Ye.A,{href:"https://www.atlassian.com/blog/jira-software/jql-the-most-flexible-way-to-search-jira-14"},"What is JQL?"))))),v.createElement(b.A,{item:!0},v.createElement(E.A,{className:s.box,paddingBottom:2},v.createElement(nn,{sites:r,jqlList:i}))))})),rn=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enabled:a,nestSubtasks:l,fetchAllQueryResults:r,monitorEnabled:i,refreshInterval:c,sites:o,jqlList:s})=>{const[m,u]=(0,v.useState)(t),[d,b]=(0,v.useState)(o),[p,E]=(0,v.useState)(s),g=(0,v.useCallback)(((e,t)=>{u(t),n(A.IS.Issues,t)}),[n]);return(0,v.useEffect)((()=>{b((e=>Be()(e,o)?e:o))}),[o]),(0,v.useEffect)((()=>{E((e=>Be()(e,s)?e:s))}),[s]),(0,v.useEffect)((()=>{u((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:m,onChange:g},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Jira}-${A.IS.Issues}-content`,id:`${A.AQ.Jira}-${A.IS.Issues}-header`},v.createElement(F.x,null,"Jira Issues Explorer"),v.createElement(T.n,null,"configure the Jira issue explorer, custom JQL and notifications")),v.createElement(N.A,null,v.createElement(ln,{sites:d,jqlList:p,enabled:a,nestSubtasks:l,fetchAllQueryResults:r,monitorEnabled:i,refreshInterval:c})))})),cn=(0,v.memo)((({enabled:e})=>{const t=(0,v.useContext)(B),[n,a]=(0,v.useState)({}),l=(0,v.useCallback)((e=>{const t=Object.create(null);t["jira.hover.enabled"]=e.target.checked,a(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(n).length>0&&(t.updateConfig(n),a({}))}),[n,t]),v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"jiraHoverEnabled",checked:e,onChange:l}),label:"Show details when hovering over issue keys in the editor",spacing:1,variant:"body1"})})),on=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enabled:a})=>{const[l,r]=(0,v.useState)(t),i=(0,v.useCallback)(((e,t)=>{r(t),n(A.IS.Hovers,t)}),[n]);return(0,v.useEffect)((()=>{r((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:l,onChange:i},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Jira}-${A.IS.Hovers}-content`,id:`${A.AQ.Jira}-${A.IS.Hovers}-header`},v.createElement(F.x,null,"Jira Issue Hovers"),v.createElement(T.n,null,"configure hovering for Jira issue keys")),v.createElement(N.A,null,v.createElement(cn,{enabled:a})))})),sn=(0,v.memo)((({triggers:e,disabled:t})=>{const n=(0,v.useContext)(B),[a,l]=(0,v.useState)({}),r=ce(),i=(0,v.useCallback)((e=>{const t=Object.create(null);t["jira.todoIssues.enabled"]=e.target.checked,l(t)}),[]),c=(0,v.useCallback)((e=>{const t=Object.create(null);t["jira.todoIssues.triggers"]=e,l(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(a).length>0&&(n.updateConfig(a),l({}))}),[a,n]),v.createElement(b.A,{container:!0,direction:"column",spacing:2},v.createElement(b.A,{item:!0},v.createElement(pe.V_,{control:v.createElement(Ee.A,{size:"small",color:"primary",id:"jiraHoverEnabled",checked:!t,onChange:i}),label:"Show code action to 'Create Jira issue' for comment triggers",spacing:1,variant:"body1"})),v.createElement(b.A,{item:!0},v.createElement(E.A,{marginTop:2},v.createElement(o.A,{variant:"h4"},"Comment Triggers"),v.createElement(o.A,{variant:"caption"},"Strings (in comments) that will cause the 'Create Jira issue' code action to show"),v.createElement(E.A,{className:r.box,marginTop:1,paddingBottom:2},v.createElement(pe.Ig,{options:e,reverseButtons:!0,addOptionButtonContent:"Add Trigger",disabled:t,inputLabel:"Trigger Text",onChange:c,emptyComponent:v.createElement(E.A,{width:"100%"},v.createElement(o.A,{align:"center"},"No triggers found."))})))))})),mn=(0,v.memo)((({visible:e,expanded:t,onSubsectionChange:n,enabled:a,triggers:l})=>{const[r,i]=(0,v.useState)(t),[c,o]=(0,v.useState)(l),s=(0,v.useCallback)(((e,t)=>{i(t),n(A.IS.Triggers,t)}),[n]);return(0,v.useEffect)((()=>{i((e=>e!==t?t:e))}),[t]),(0,v.useEffect)((()=>{o((e=>Be()(e,l)?e:l))}),[l]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:r,onChange:s},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Jira}-${A.IS.Triggers}-content`,id:`${A.AQ.Jira}-${A.IS.Triggers}-header`},v.createElement(F.x,null,"Create Jira Issue Triggers"),v.createElement(T.n,null,"configure creation of Jira issues from TODOs and similar")),v.createElement(N.A,null,v.createElement(sn,{disabled:!a,triggers:c})))}));var un=n(95652),dn=n(57965),bn=n.n(dn);const pn=({customTemplate:e,customPrefixes:t})=>{const n=(0,v.useContext)(B),a=ce(),[l,r]=(0,v.useState)({}),[i,c]=(0,v.useState)(e),s=(0,v.useCallback)((e=>{const t=Object.create(null);t["jira.startWorkBranchTemplate.customPrefixes"]=e,r(t)}),[]),m=(0,v.useCallback)((e=>{c(e);const t=Object.create(null);t["jira.startWorkBranchTemplate.customTemplate"]=e,r(t)}),[]);(0,v.useEffect)((()=>{Object.keys(l).length>0&&(n.updateConfig(l),r({}))}),[l,n]);const u=(0,v.useCallback)((()=>{const e={prefix:"feature",PREFIX:"FEATURE",issueKey:"VSCODE-1005",issuekey:"vscode-1005",summary:"allow-users-to-configure-the-way-branch-name-is-co",SUMMARY:"ALLOW-USERS-TO-CONFIGURE-THE-WAY-BRANCH-NAME-IS-CO"};try{return`Preview: ${bn().render(i,e)}`}catch(e){return"Invalid template: please follow the format described above"}}),[i]);return v.createElement(b.A,{container:!0,direction:"column"},v.createElement(b.A,{item:!0},v.createElement(E.A,{margin:2},v.createElement(o.A,{variant:"h4"},"Custom Branch Template"),v.createElement(o.A,{variant:"caption"},"Branch names will be generated based on the template. Use the keywords ",v.createElement("code",null,"prefix"),","," ",v.createElement("code",null,"issueKey"),", and ",v.createElement("code",null,"summary")," surrounded by triple curly brackets to build a template. Any of the keywords can be excluded if they are not needed, but do not put a non-keyword in double curly brackets. E.g."," ",v.createElement("code",null,"{{{prefix}}}/{{{issueKey}}}-{{{summary}}}")," will generate something of the format"," ",v.createElement("code",null,"feature/VSCODE-1005-allow-users-to-configure-the-way-branch-name-is-co"),v.createElement("br",null),"Upper-case: ",v.createElement("code",null,"PREFIX, SUMMARY"),v.createElement("br",null),"Mixed-case: ",v.createElement("code",null,"Prefix, Summary, issueKey"),v.createElement("br",null),"Lower-case: ",v.createElement("code",null,"prefix, issuekey, summary")),v.createElement(E.A,{marginTop:1,paddingBottom:2},v.createElement(pe.wI,{fullWidth:!0,label:"Custom Template Text",defaultValue:e,onSave:m}),v.createElement(un.A,{id:"my-helper-text"},u())))),v.createElement(b.A,{item:!0},v.createElement(E.A,{margin:2},v.createElement(o.A,{variant:"h4"},"Custom Prefixes"),v.createElement(o.A,{variant:"caption"},v.createElement(o.A,{variant:"body2"},"For repos with no branching model, custom prefixes can be created here."),v.createElement(o.A,{variant:"body2"},v.createElement("b",null,"Bitbucket Users:")," Prefixes are part of your branching model and can be configured on the"," ",v.createElement(Ye.A,{href:"https://bitbucket.org/blog/introducing-bitbucket-branching-model-support"},"Bitbucket Website"))),v.createElement(E.A,{className:a.box,marginTop:1,paddingBottom:2},v.createElement(pe.Ig,{options:t,reverseButtons:!0,addOptionButtonContent:"Add Custom Prefix",inputLabel:"Custom Prefix Text",onChange:s,disabled:!1,emptyComponent:v.createElement(E.A,{width:"100%"},v.createElement(o.A,{align:"center"},"No prefixes found."))})))))},En=(0,v.memo)((({visible:e,expanded:t,customPrefixes:n,customTemplate:a,onSubsectionChange:l})=>{const[r,i]=(0,v.useState)(t),c=(0,v.useCallback)(((e,t)=>{i(t),l(A.IS.StartWork,t)}),[l]);return(0,v.useEffect)((()=>{i((e=>e!==t?t:e))}),[t]),v.createElement(Q.A,{hidden:!e,square:!1,expanded:r,onChange:c},v.createElement(L.A,{expandIcon:v.createElement(P.A,null),"aria-controls":`${A.AQ.Jira}-${A.IS.StartWork}-content`,id:`${A.AQ.Jira}-${A.IS.StartWork}-header`},v.createElement(F.x,null,"Start Work"),v.createElement(T.n,null,"configure the start work screen")),v.createElement(N.A,null,v.createElement(pn,{customPrefixes:n,customTemplate:a})))})),gn=({visible:e,selectedSubSections:t,onSubsectionChange:n,config:a,sites:l,isRemote:r})=>{const i=(0,v.useMemo)((()=>l.map((e=>e.site))),[l]);return v.createElement(v.Fragment,null,v.createElement($.A,{in:e},v.createElement("div",{hidden:!e||a["jira.enabled"]},"Enable Jira features to see settings")),v.createElement($.A,{in:e},v.createElement("div",{hidden:!e||!a["jira.enabled"],role:"tabpanel"},v.createElement(b.A,{container:!0,spacing:3,direction:"column"},v.createElement(b.A,{item:!0},v.createElement(be,{visible:e,expanded:t.includes(A.IS.Auth),onSubsectionChange:n,isRemote:r,sites:l,product:z.IH,section:A.AQ.Jira})),v.createElement(b.A,{item:!0},v.createElement(rn,{visible:e,expanded:t.includes(A.IS.Issues),onSubsectionChange:n,sites:i,jqlList:a[`${A.AQ.Jira}.jqlList`],enabled:a[`${A.AQ.Jira}.explorer.enabled`],nestSubtasks:a[`${A.AQ.Jira}.explorer.nestSubtasks`],fetchAllQueryResults:a[`${A.AQ.Jira}.explorer.fetchAllQueryResults`],monitorEnabled:a[`${A.AQ.Jira}.explorer.monitorEnabled`],refreshInterval:a[`${A.AQ.Jira}.explorer.refreshInterval`]})),v.createElement(b.A,{item:!0},v.createElement(on,{visible:e,expanded:t.includes(A.IS.Hovers),onSubsectionChange:n,enabled:a[`${A.AQ.Jira}.hover.enabled`]})),v.createElement(b.A,{item:!0},v.createElement(mn,{visible:e,expanded:t.includes(A.IS.Triggers),onSubsectionChange:n,enabled:a[`${A.AQ.Jira}.todoIssues.enabled`],triggers:a[`${A.AQ.Jira}.todoIssues.triggers`]})),v.createElement(b.A,{item:!0},v.createElement(En,{visible:e,expanded:t.includes(A.IS.StartWork),onSubsectionChange:n,customPrefixes:a[`${A.AQ.Jira}.startWorkBranchTemplate.customPrefixes`],customTemplate:a[`${A.AQ.Jira}.startWorkBranchTemplate.customTemplate`]})),v.createElement(b.A,{item:!0},v.createElement(Pe,{visible:e,expanded:t.includes(A.IS.Status),onSubsectionChange:n,configSection:A.AQ.Jira,productName:z.IH.name,enabled:a[`${A.AQ.Jira}.statusbar.enabled`],showProduct:a[`${A.AQ.Jira}.statusbar.showProduct`],showUser:a[`${A.AQ.Jira}.statusbar.showUser`],showLogin:a[`${A.AQ.Jira}.statusbar.showLogin`]}))))))};var hn=n(56872),An=n(63353);const fn=({label:e,enabled:t,onToggle:n})=>{const a=(0,v.useCallback)((e=>{e.stopPropagation()}),[]),l=(0,v.useCallback)((e=>{n(e.target.checked)}),[n]);return v.createElement(b.A,{container:!0,justify:"center",alignItems:"center",spacing:1},v.createElement(b.A,{item:!0},v.createElement(u.Ay,{title:t?`Disable ${e} features`:`Enable ${e} features`},v.createElement(Ee.A,{color:"primary",size:"small",checked:t,onClick:a,onChange:l}))),v.createElement(b.A,{item:!0},v.createElement("span",null,e)))};var Cn=n(64842);const vn=(0,v.memo)((({feedbackUser:e})=>{const t=(0,v.useContext)(B);return v.createElement(b.A,{container:!0,direction:"column",alignItems:"center"},v.createElement(b.A,{item:!0},v.createElement(b.A,{container:!0,spacing:2,direction:"column",alignItems:"flex-start"},v.createElement(b.A,{item:!0},v.createElement(Cn.K,{user:e,postMessageFunc:t.postMessage})),v.createElement(b.A,{item:!0},v.createElement(pe.AX,{href:"#",onClick:()=>t.openLink(f.Be.AtlascodeRepo),startIcon:v.createElement(We.A,null)},"Source Code")),v.createElement(b.A,{item:!0},v.createElement(pe.AX,{href:"#",onClick:()=>t.openLink(f.Be.AtlascodeIssues),startIcon:v.createElement(We.A,null)},"Got Issues?")),v.createElement(b.A,{item:!0},v.createElement(pe.AX,{href:"#",onClick:()=>t.openLink(f.Be.AtlascodeDocs),startIcon:v.createElement(We.A,null)},"User Guide")))))}));var kn=n(23078),yn=n(44122),Sn=n(86945);const xn=(0,l.A)((e=>({title:{flexGrow:0,marginRight:e.spacing(3),whiteSpace:"nowrap"},targetSelectLabel:{marginLeft:e.spacing(1),marginRight:e.spacing(1),whiteSpace:"nowrap"},grow:{flexGrow:1},paper100:{overflow:"hidden",height:"100%"},paperOverflow:{overflow:"hidden"}}))),In={[A.AQ.Jira]:[],[A.AQ.Bitbucket]:[],[A.AQ.General]:[]},wn=()=>{const e=xn(),[t,n]=function(){const[e,t]=(0,v.useReducer)(J,O),n=(0,v.useCallback)((e=>{switch(e.type){case h.e1.Init:t({type:j.Init,data:e});break;case h.e1.SectionChange:t({type:j.SectionChange,data:e});break;case h.e1.Update:t({type:j.ConfigChange,config:e.config,target:e.target});break;case h.e1.SitesUpdate:t({type:j.SitesUpdate,jiraSites:e.jiraSites,bitbucketSites:e.bitbucketSites});break;default:(0,k.z)(e)}}),[]),[l,r]=(0,C.G)(n),i=(0,v.useCallback)(((n,r)=>{t({type:j.LocalChange,changes:n}),l({type:a.SaveSettings,changes:n,removes:r,target:e.target})}),[l,e.target]),c=(0,v.useCallback)((e=>{t({type:j.Loading}),l({type:a.SetTarget,target:e})}),[l]),o=(0,v.useCallback)((()=>{t({type:j.Loading}),l({type:y.I.Refresh})}),[l]),s=(0,v.useCallback)((e=>l({type:y.I.ExternalLink,source:f.po.ConfigWebview,linkId:e})),[l]),m=(0,v.useCallback)(((e,n)=>{t({type:j.Loading}),l({type:a.Login,siteInfo:e,authInfo:n})}),[l]),u=(0,v.useCallback)((e=>{t({type:j.Loading}),l({type:a.Logout,siteInfo:e})}),[l]),d=(0,v.useCallback)((e=>new Promise(((t,n)=>{(()=>{I(this,void 0,void 0,(function*(){try{const n=yield r({type:a.JQLOptionsRequest,site:e},h.e1.JQLOptionsResponse,S.Q);t(n.data)}catch(e){n(e)}}))})()}))),[r]),b=(0,v.useCallback)(((e,t,n,i,c)=>new Promise(((o,s)=>{(()=>{I(this,void 0,void 0,(function*(){try{var m="";c&&(m=(0,x.v4)(),c.onabort=()=>{l({type:y.I.Cancel,abortKey:m,reason:"fetchJqlSuggestions cancelled by client"})});const s=yield r({type:a.JQLSuggestionsRequest,site:e,fieldName:t,userInput:n,predicateName:i,abortKey:c?m:void 0},h.e1.JQLSuggestionsResponse,S.Q);o(s.data)}catch(e){s(e)}}))})()}))),[l,r]),p=(0,v.useCallback)(((e,t,n,i,c)=>new Promise(((o,s)=>{(()=>{I(this,void 0,void 0,(function*(){try{var m="";c&&(m=(0,x.v4)(),c.onabort=()=>{l({type:y.I.Cancel,abortKey:m,reason:"fetchFilterSearchResults cancelled by client"})});const s=yield r({type:a.FilterSearchRequest,site:e,query:t,maxResults:n,startAt:i,abortKey:c?m:void 0},h.e1.FilterSearchResponse,S.Q);o(s.data)}catch(e){s(e)}}))})()}))),[l,r]),E=(0,v.useCallback)(((e,t,n)=>new Promise(((i,c)=>{(()=>{I(this,void 0,void 0,(function*(){try{var o="";n&&(o=(0,x.v4)(),n.onabort=()=>{l({type:y.I.Cancel,abortKey:o,reason:"validateJql cancelled by client"})});const c=yield r({type:a.ValidateJqlRequest,site:e,jql:t,abortKey:n?o:void 0},h.e1.ValidateJqlResponse,S.Q);i(c.data)}catch(e){c(e)}}))})()}))),[l,r]),g=(0,v.useCallback)((()=>{t({type:j.Loading}),l({type:a.CreatePullRequest})}),[l]),A=(0,v.useCallback)((()=>{t({type:j.Loading}),l({type:a.ViewPullRequest})}),[l]),w=(0,v.useCallback)((()=>{t({type:j.Loading}),l({type:a.CreateJiraIssue})}),[l]),R=(0,v.useCallback)((()=>{t({type:j.Loading}),l({type:a.ViewJiraIssue})}),[l]),B=(0,v.useMemo)((()=>({postMessage:l,updateConfig:i,setConfigTarget:c,refresh:o,openLink:s,login:m,logout:u,fetchJqlSuggestions:b,fetchJqlOptions:d,fetchFilterSearchResults:p,validateJql:E,createJiraIssue:w,createPullRequest:g,viewPullRequest:A,viewJiraIssue:R})),[i,m,u,s,l,o,c,d,b,p,E,w,g,A,R]);return[e,B]}(),[l,w]=(0,v.useState)({}),[R,$]=(0,v.useState)(t.target),[Q,L]=(0,v.useState)((()=>t.openSection)),[N,P]=(0,v.useState)((()=>Object.assign(Object.assign({},In),{[t.openSection]:t.openSubSections}))),{authDialogController:T,authDialogOpen:F,authDialogProduct:W,authDialogEntry:U}=(0,g.A)(),z=(0,v.useCallback)(((e,t)=>{L(t)}),[]),V=(0,v.useCallback)(((e,t)=>{P((n=>{const a=Object.assign({},n);if(t)return a[Q]=[...n[Q],e],a;const l=[...n[Q]],r=l.findIndex((t=>t===e));return r>-1?(l.splice(r,1),a[Q]=l,a):n}))}),[Q]),D=(0,v.useCallback)(((e,t)=>{L(e),P((n=>{const a=Object.assign({},n);return a[e]=[...n[e],t],a}))}),[]),M=(0,v.useCallback)((e=>{const t=Object.create(null);t["jira.enabled"]=e,w(t)}),[]),_=(0,v.useCallback)((e=>{const t=Object.create(null);t["bitbucket.enabled"]=e,w(t)}),[]),G=(0,v.useCallback)(((e,t)=>{t&&$(t)}),[]);return(0,v.useEffect)((()=>{Object.keys(l).length>0&&(n.updateConfig(l),w({}))}),[l,n]),(0,v.useEffect)((()=>{n.setConfigTarget(R)}),[R,n]),(0,v.useEffect)((()=>{L((e=>t.openSection!==e?t.openSection:e))}),[t.openSection]),(0,v.useEffect)((()=>{P((e=>Be()(t.openSubSections,e)?e:Object.assign(Object.assign({},In),{[t.openSection]:t.openSubSections})))}),[t.openSection,t.openSubSections]),v.createElement(B.Provider,{value:n},v.createElement(g.y.Provider,{value:T},v.createElement(r.A,{maxWidth:"xl"},v.createElement(i.A,{position:"relative"},v.createElement(c.A,null,v.createElement(o.A,{variant:"h3",className:e.title},"Atlassian Settings"),v.createElement(s.A,{value:Q,onChange:z,"aria-label":"simple tabs example",indicatorColor:"primary",variant:"scrollable",scrollButtons:"on"},v.createElement(m.A,{id:"simple-tab-0","aria-controls":"simple-tabpanel-0",value:A.AQ.Jira,label:v.createElement(fn,{label:"Jira",enabled:t.config["jira.enabled"],onToggle:M})}),v.createElement(m.A,{id:"simple-tab-1","aria-controls":"simple-tabpanel-1",value:A.AQ.Bitbucket,label:v.createElement(fn,{label:"Bitbucket",enabled:t.config["bitbucket.enabled"],onToggle:_})}),v.createElement(m.A,{id:"simple-tab-2","aria-controls":"simple-tabpanel-2",value:A.AQ.General,label:"General"}),v.createElement(m.A,{id:"simple-tab-3","aria-controls":"simple-tabpanel-3",value:A.AQ.Explore,label:"Explore"})),v.createElement("div",{className:e.grow}),v.createElement(o.A,{variant:"subtitle1",classes:{root:e.targetSelectLabel}},"Save settings to:"," "),v.createElement(yn.A,{color:"primary",size:"small",value:R,exclusive:!0,onChange:G},v.createElement(u.Ay,{title:"User settings"},v.createElement(kn.A,{key:1,value:A.U.User,selected:R!==A.U.User,disableRipple:R===A.U.User},v.createElement(d.A,{color:"primary",variant:"dot",invisible:R!==A.U.User},v.createElement(An.A,null)))),v.createElement(u.Ay,{title:"Workspace settings"},v.createElement(kn.A,{key:2,value:A.U.Workspace,selected:R!==A.U.Workspace,disableRipple:R===A.U.Workspace},v.createElement(d.A,{color:"primary",variant:"dot",invisible:R!==A.U.Workspace},v.createElement(Sn.A,null))))),v.createElement(pe.sv,{loading:t.isSomethingLoading,onClick:n.refresh}))),v.createElement(b.A,{container:!0,spacing:1},v.createElement(b.A,{item:!0,xs:12,md:9,lg:10,xl:10},v.createElement(p.A,{className:e.paper100},v.createElement(Fe.n,null),v.createElement(hn.O,{postMessageFunc:n.postMessage}),v.createElement(E.A,{margin:2},v.createElement(gn,{visible:Q===A.AQ.Jira,selectedSubSections:N[A.AQ.Jira],onSubsectionChange:V,config:t.config,sites:t.jiraSites,isRemote:t.isRemote}),v.createElement(Te,{visible:Q===A.AQ.Bitbucket,selectedSubSections:N[A.AQ.Bitbucket],onSubsectionChange:V,config:t.config,sites:t.bitbucketSites,isRemote:t.isRemote}),v.createElement(ot,{visible:Q===A.AQ.General,selectedSubSections:N[A.AQ.General],onSubsectionChange:V,config:t.config}),v.createElement(Ge,{visible:Q===A.AQ.Explore,config:t.config,sectionChanger:D})))),v.createElement(b.A,{item:!0,xs:12,md:3,lg:2,xl:2},v.createElement(p.A,{className:e.paperOverflow},v.createElement(E.A,{margin:2},v.createElement(vn,{feedbackUser:t.feedbackUser})))))),v.createElement(q.H,{product:W,doClose:T.close,authEntry:U,open:F,save:n.login,onExited:T.onExited})))}}}]);