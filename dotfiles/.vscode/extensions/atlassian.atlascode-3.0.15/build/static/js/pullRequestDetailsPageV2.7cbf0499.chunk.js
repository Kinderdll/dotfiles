"use strict";(self.webpackChunkatlascode=self.webpackChunkatlascode||[]).push([[224],{4882:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(96540)),l=(0,n(a(76447)).default)(r.default.createElement("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt");t.A=l},17786:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(96540)),l=(0,n(a(76447)).default)(r.default.createElement("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"}),"Build");t.A=l},77690:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(96540)),l=(0,n(a(76447)).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.A=l},99549:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(96540)),l=(0,n(a(76447)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),r.default.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})),"Schedule");t.A=l},6406:(e,t,a)=>{var n;a.d(t,{Bg:()=>l,IH:()=>r,J8:()=>c,M:()=>m,MB:()=>u,Rc:()=>o,jn:()=>d,sR:()=>i}),function(e){e.Update="update",e.Remove="remove"}(n||(n={}));const r={name:"Jira",key:"jira"},l={name:"Bitbucket",key:"bitbucket"};var s,i;!function(e){e.BitbucketCloud="bbcloud",e.BitbucketCloudStaging="bbcloudstaging",e.JiraCloud="jiracloud",e.JiraCloudStaging="jiracloudstaging"}(s||(s={})),function(e){e[e.Valid=0]="Valid",e[e.Invalid=1]="Invalid"}(i||(i={}));const c={id:"",displayName:"",email:"",avatarUrl:""},o={id:"",name:"",avatarUrl:"",host:"",baseLinkUrl:"",baseApiUrl:"",product:{name:"",key:""},isCloud:!0,userId:"",credentialId:""},d={id:"",name:"",avatarUrl:"",scopes:[],baseUrlSuffix:"atlassian.net"},u={user:c,state:i.Valid},m={user:c,username:"",password:"",state:i.Valid};i.Valid},55765:(e,t,a)=>{a.d(t,{BM:()=>c,F2:()=>l,GT:()=>d,ZH:()=>i,e_:()=>r});var n=a(6406);const r={details:n.Rc,ownerSlug:"",repoSlug:""},l={accountId:"",displayName:"",url:"",avatarUrl:"",mention:""},s={id:"",scm:void 0,name:"",displayName:"",fullName:"",parentFullName:void 0,url:"",avatarUrl:"",mainbranch:void 0,developmentBranch:void 0,branchingModel:void 0,issueTrackerEnabled:!1},i={id:"",deletable:!1,editable:!1,user:l,htmlContent:"",rawContent:"",ts:"",updatedTs:"",deleted:!1,children:[],tasks:[]};var c;!function(e){e.ADDED="A",e.DELETED="D",e.COPIED="C",e.MODIFIED="M",e.RENAMED="R",e.CONFLICT="CONFLICT",e.UNKNOWN="X"}(c||(c={}));const o={siteDetails:n.Rc,id:"",version:0,url:"",author:l,participants:[],source:{repo:s,branchName:"",commitHash:""},destination:{repo:s,branchName:"",commitHash:""},title:"",htmlSummary:"",rawSummary:"",ts:"",updatedTs:"",state:"OPEN",closeSourceBranch:!1,taskCount:0},d={site:r,data:o}},17970:(e,t,a)=>{var n;a.d(t,{P:()=>n}),function(e){e.Error="error",e.OnlineStatus="onlineStatus",e.PMFStatus="pmfStatus",e.UpdateFeatureFlags="updateFeatureFlags"}(n||(n={}))},79698:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(26232),r=a(83220),l=a(84630),s=a(27606),i=a(83182),c=a(96540),o=a(75981),d=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const u={new:c.createElement(o.A,{appearance:"new",label:"new"}),open:c.createElement(o.A,{appearance:"inprogress",label:"open"}),resolved:c.createElement(o.A,{appearance:"success",label:"resolved"}),"on hold":c.createElement(o.A,{appearance:"default",label:"on hold"}),invalid:c.createElement(o.A,{appearance:"moved",label:"invalid"}),duplicate:c.createElement(o.A,{appearance:"default",label:"duplicate"}),wontfix:c.createElement(o.A,{appearance:"removed",label:"wontfix"}),closed:c.createElement(o.A,{appearance:"default",label:"closed"})},m=e=>{var t;const a=(0,c.useCallback)((t=>d(void 0,void 0,void 0,(function*(){var a,n,r;if(!(null===(a=null===t||void 0===t?void 0:t.target)||void 0===a?void 0:a.value)||(null===(n=null===t||void 0===t?void 0:t.target)||void 0===n?void 0:n.value)!==e.status)try{p(!0),(null===(r=null===t||void 0===t?void 0:t.target)||void 0===r?void 0:r.value)&&(f(t.target.value),yield e.onChange(t.target.value))}finally{p(!1)}}))),[e]),o=(0,n.A)(),[m,p]=(0,c.useState)(!1),[E,f]=(0,c.useState)(e.status);return c.createElement(r.A,{fullWidth:e.fullWidth,label:e.label,select:!0,variant:null!==(t=e.variant)&&void 0!==t?t:"standard",size:"small",value:m?E:e.status,onChange:a},Object.keys(u).map((e=>c.createElement(l.A,{key:e,value:e},c.createElement(s.A,{container:!0,spacing:1,alignItems:"center"},c.createElement(s.A,{item:!0},u[e]),c.createElement(s.A,{item:!0,hidden:!m},c.createElement(i.A,{size:o.typography.fontSize})))))))}},37262:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(27606),r=a(91004),l=a(96540),s=a(8949);const i=e=>l.createElement(n.A,{container:!0,spacing:1,alignItems:"flex-start"},l.createElement(n.A,{item:!0},l.createElement(r.A,{src:e.currentUser.avatarUrl})),l.createElement(n.A,{item:!0,xs:10},l.createElement(n.A,{container:!0,spacing:1,direction:"column"},l.createElement(n.A,{item:!0},l.createElement(s.n,{initialContent:e.initialContent,onSave:e.onSave,onCancel:e.onCancel,fetchUsers:e.fetchUsers})))))},10424:(e,t,a)=>{a.d(t,{g:()=>i});var n=a(96232),r=a(42460),l=a(75437),s=a(96540);const i=e=>{const t=(0,s.useCallback)((()=>e.onClick(e.url)),[e]);return s.createElement(n.Ay,{title:e.tooltip},s.createElement(r.A,{"aria-label":"copy link",onClick:t},s.createElement(l.A,null)))}},9603:(e,t,a)=>{a.d(t,{n:()=>f});var n=a(61633),r=a(82096),l=a(69440),s=a(42460),i=a(82290),c=a(73546),o=a(13118),d=a(44866),u=a(96540),m=a(68414),p=a(94211);const E=(0,r.A)((e=>({indent:{marginLeft:e.spacing(3)}}))),f=({})=>{const e=E(),t=(0,u.useContext)(p.Jg),a=(0,u.useContext)(p.Er),[r,f]=(0,u.useState)(t.isErrorBannerOpen);(0,u.useEffect)((()=>{f((e=>e!==t.isErrorBannerOpen?t.isErrorBannerOpen:e))}),[t.isErrorBannerOpen]);const b=[];(0,n.HT)(t.errorDetails)?(Object.keys(t.errorDetails.errors).forEach((a=>{b.push(u.createElement("p",{key:a},u.createElement("b",null,a,":"),u.createElement("span",{className:e.indent},t.errorDetails.errors[a])))})),t.errorDetails.errorMessages.forEach((t=>{b.push(u.createElement("p",{key:(0,m.v4)()},u.createElement("span",{className:e.indent},t)))}))):(0,n.Jc)(t.errorDetails)?t.errorDetails.errorMessages.forEach((t=>{b.push(u.createElement("p",{key:(0,m.v4)()},u.createElement("span",{className:e.indent},t)))})):"object"===typeof t.errorDetails?Object.keys(t.errorDetails).forEach((a=>{b.push(u.createElement("p",{key:a},u.createElement("b",null,a,":"),u.createElement("span",{className:e.indent},JSON.stringify(t.errorDetails[a]))))})):b.push(u.createElement("p",{key:(0,m.v4)()},t.errorDetails));const A=(0,u.useCallback)((()=>{a.dismissError(),f(!1)}),[a]),v=(0,u.useCallback)((()=>{f(!1)}),[]),g=t.errorDetails&&t.errorDetails.title?t.errorDetails.title:"Something went wrong";return u.createElement(u.Fragment,null,u.createElement(l.A,{in:t.isErrorBannerOpen},u.createElement(o.A,{variant:"standard",severity:"error",action:u.createElement(s.A,{"aria-label":"close",color:"inherit",size:"small",onClick:A},u.createElement(c.A,{fontSize:"inherit"}))},u.createElement(d.A,null,g),b)),u.createElement(i.A,{open:r,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"left"}},u.createElement(o.A,{variant:"standard",severity:"error",action:u.createElement(s.A,{"aria-label":"close",color:"inherit",size:"small",onClick:v},u.createElement(c.A,{fontSize:"inherit"}))},u.createElement(d.A,null,g),u.createElement("p",null,"See details at the top of this page"))))}},75981:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(82096),r=a(33615),l=a(96540);const s=(0,n.A)((e=>({default:{color:"#42526E",backgroundColor:"#DFE1E6",fontWeight:"bold",textTransform:"uppercase"},inprogress:{color:"#0747A6",backgroundColor:"#DEEBFF",fontWeight:"bold",textTransform:"uppercase"},moved:{color:"#172B4D",backgroundColor:"#FFF0B3",fontWeight:"bold",textTransform:"uppercase"},new:{color:"#403294",backgroundColor:"#EAE6FF",fontWeight:"bold",textTransform:"uppercase"},removed:{color:"#BF2600",backgroundColor:"#FFEBE6",fontWeight:"bold",textTransform:"uppercase"},success:{color:"#006644",backgroundColor:"#E3FCEF",fontWeight:"bold",textTransform:"uppercase"}}))),i=({appearance:e,label:t})=>{const a=s();return l.createElement(r.A,{className:a[e],size:"small",label:t})}},30981:(e,t,a)=>{a.d(t,{n:()=>o});var n=a(82096),r=a(54392),l=a(20053),s=a(96540),i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const c=(0,n.A)((e=>({root:{fontSize:e.typography.pxToRem(14),fontStyle:"italic"}}))),o=(0,s.memo)((e=>{var{children:t,className:a}=e,n=i(e,["children","className"]);const o=c();return s.createElement(r.A,Object.assign({variant:"subtitle1",className:(0,l.A)(o.root,a)},n),t||"")}))},31783:(e,t,a)=>{a.d(t,{x:()=>o});var n=a(82096),r=a(54392),l=a(20053),s=a(96540),i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const c=(0,n.A)((e=>({root:{marginRight:e.spacing(2)}}))),o=(0,s.memo)((e=>{var{children:t,className:a}=e,n=i(e,["children","className"]);const o=c();return s.createElement(r.A,Object.assign({variant:"h4",className:(0,l.A)(o.root,a)},n),t||"")}))},8949:(e,t,a)=>{a.d(t,{n:()=>T});var n=a(2948),r=a(82096),l=a(26232),s=a(27606),i=a(26758),c=a(83220),o=a(96746),d=a(83182),u=a(64794),m=a(34647),p=a(65970),E=a(8600),f=a(41651),b=a(12970),A=a(38886),v=a(45356),g=a(93855),h=a(39082),C=a(91239),y=a(43867),k=a(38800),S=a(93524),w=a(96540),O=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};function I(e,t,a){return new A.fV(e,((e,n,r,l)=>{const s=a instanceof Function?a(n):a,i=e.tr,c=n[0],o=n.length>2?n[1]:"",d=n.length>2?n[2]:n[1];if(d){const e=r+c.indexOf(d),t=e+d.length;t<l&&i.delete(t,l),e>r&&i.delete(r+o.length,e),l=r+o.length+d.length}return i.addMark(r+o.length,l,t.create(s)),i.removeStoredMark(t),i}))}const U=e=>{const t=[];return e.marks.strong&&(t.push(I(/(?:\*\*)([^\*_]+)(?:\*\*|__)$/,e.marks.strong,void 0)),t.push(I(/(?:__)([^_]+)(?:__)$/,e.marks.strong,void 0))),e.marks.em&&(t.push(I(/(^|[^\*])(?:\*)([^\*]+)(?:\*)$/,e.marks.em,void 0)),t.push(I(/(^|[^_])(?:_)([^_]+)(?:_)$/,e.marks.em,void 0))),e.marks.link&&t.push(I(/(^|[^!])\[(.*?)\]\((\S+)\)$/,e.marks.link,(e=>({href:e[3]})))),t.push((0,A.tG)(/^\s*>\s$/,e.nodes.blockquote),(0,A.tG)(/^(\d+)\.\s$/,e.nodes.ordered_list,(e=>({order:+e[1]})),((e,t)=>t.childCount+t.attrs.order===+e[1])),(0,A.tG)(/^\s*([-+*])\s$/,e.nodes.bullet_list),(0,A.JJ)(/^```$/,e.nodes.code_block),(0,A.JJ)(new RegExp("^(#{1,6})\\s$"),e.nodes.heading,(e=>({level:e[1].length})))),t};var D=new y.Sj({nodes:(0,h.hF)(g.wQ.spec.nodes),marks:g.wQ.spec.marks});const R=new g.K6(Object.assign(Object.assign({},g.lR.nodes),{mention:(e,t)=>{e.write(t.attrs.id)}}),g.lR.marks),N=new g.Fd(D,g.ee.tokenizer,Object.assign({},g.ee.tokens));const j=new k.hs("reactProps");const B=(0,r.A)((e=>({editor:{borderWidth:1,borderStyle:"solid",borderColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)",borderRadius:e.shape.borderRadius,"&:hover":{borderColor:e.palette.text.primary},"&:focus-within":{borderColor:e.palette.primary.main,borderWidth:2}}}))),T=e=>{const t=(0,l.A)(),a=B(),r=(0,w.useRef)(null),g=(0,w.useRef)(null),[y,I]=(0,w.useState)(!0),[T,x]=(0,w.useState)(e.initialContent||""),[M,P]=(0,w.useState)("initial"),L=(0,w.useCallback)((e=>{I(e.target.checked)}),[]),F=(0,w.useCallback)((e=>x(e.target.value)),[]),z=(0,w.useCallback)((()=>{var t,a,n;if(y){const e=null===(t=g.current)||void 0===t?void 0:t.state.doc.slice(0),n=g.current.state.tr.delete(0,(null===e||void 0===e?void 0:e.size)||0);null===(a=g.current)||void 0===a||a.dispatch(n)}else x("");null===(n=e.onCancel)||void 0===n||n.call(e)}),[y,e.onCancel]),J=(0,w.useCallback)((()=>O(void 0,void 0,void 0,(function*(){const t=y?R.serialize(g.current.state.doc):T;if(t.trim().length>0)try{P("submitting"),yield e.onSave(t),z()}finally{P("initial")}}))),[e,z,T,y]);return(0,w.useEffect)((()=>{if(g.current)if(y){const e=g.current.state.doc.slice(0),t=g.current.state.tr.replaceWith(0,(null===e||void 0===e?void 0:e.size)||0,N.parse(T));g.current.dispatch(t)}else x(R.serialize(g.current.state.doc))}),[y]),(0,w.useEffect)((()=>{const t=(0,E.Kw)(D),a=[(n=e,new k.k_({key:j,state:{init:()=>n,apply:(e,t)=>e.getMeta(j)||t}})),(0,v.w)((0,E.eu)(D)),(0,v.w)(m.RV),(0,p.A)(),(0,f.z)(),(0,C.Hy)({floating:!1,content:[[t.toggleStrong,t.toggleEm,t.toggleCode],[t.wrapBulletList,t.wrapOrderedList,t.wrapBlockQuote]]}),(0,b.b6)(),(0,A.sM)({rules:U(D)})];var n;e.fetchUsers&&a.unshift((0,h.Z7)({getSuggestions:(t,a,n)=>O(void 0,void 0,void 0,(function*(){if("mention"===t){const t=yield e.fetchUsers(a);n(t.map((e=>({name:e.displayName,id:e.mention,email:e.emailAddress||""}))))}})),getSuggestionsHTML:(e,t)=>"mention"===t?(e=>'<div class="suggestion-item-list">'+e.map((e=>'<div class="suggestion-item">'+e.name+"</div>")).join("")+"</div>")(e):w.createElement(w.Fragment,null)}));const l=k.$t.create({schema:D,doc:N.parse(T),plugins:a}),s=new S.Lz(r.current,{state:l});return g.current=s,()=>s.destroy()}),[]),(0,w.useEffect)((()=>{if(g.current){const t=g.current.state.tr.setMeta(j,e);g.current.dispatch(t)}})),w.createElement(s.A,{container:!0,spacing:1,direction:"column"},w.createElement(s.A,{item:!0},w.createElement(i.A,Object.assign({hidden:!y,minHeight:"8em",className:a.editor},{ref:r})),w.createElement(i.A,{hidden:y,minHeight:"8em"},w.createElement(c.A,{multiline:!0,fullWidth:!0,rows:4,rowsMax:20,value:T,onChange:F}))),w.createElement(s.A,{item:!0},w.createElement(s.A,{container:!0,spacing:1},w.createElement(s.A,{item:!0},w.createElement(o.A,{variant:"contained",color:"primary",onClick:J,disabled:"submitting"===M,endIcon:"submitting"===M?w.createElement(d.A,{color:"inherit",size:t.typography.fontSize}):null},"Save")),w.createElement(s.A,{item:!0},w.createElement(o.A,{variant:"contained",onClick:z},"Cancel")),w.createElement(s.A,{item:!0,xs:!0}),w.createElement(s.A,{item:!0},w.createElement(n.V_,{label:"Rich text editor",control:w.createElement(u.A,{size:"small",color:"primary",checked:y,onChange:L}),spacing:1,variant:"body2"})))))}},3119:(e,t,a)=>{a.d(t,{G:()=>i});var n=a(96540),r=a(17970),l=a(94211),s=a(59478);function i(e){const t=(0,n.useMemo)(acquireVsCodeApi,[acquireVsCodeApi]),a=(0,n.useCallback)((e=>{t.postMessage(e)}),[t]),i=(0,n.useCallback)(((e,a,n,l)=>(t.postMessage(e),new Promise(((e,t)=>{const s=setTimeout((()=>{window.removeEventListener("message",i),clearTimeout(s),t(`timeout waiting for event ${a}`)}),n),i=n=>{!n.data.type||!a||n.data.type!==a||l&&n.data.nonce!==l||(clearTimeout(s),window.removeEventListener("message",i),e(n.data)),n.data.type===r.P.Error&&l&&n.data.nonce===l&&(window.removeEventListener("message",i),clearTimeout(s),t(n.data.reason))};window.addEventListener("message",i)})))),[t]),c=(0,n.useContext)(l.Er),o=(0,n.useContext)(s.j8),d=(0,n.useCallback)((t=>{const a=t.data;if(a&&a.type)switch(a.type){case r.P.Error:c.showError(a.reason);break;case r.P.OnlineStatus:break;case r.P.PMFStatus:a.showPMF&&o.showPMFBanner();break;default:e(a)}}),[c,o,e]);return(0,n.useEffect)((()=>(window.addEventListener("message",d),t.postMessage({type:"refresh"}),()=>{window.removeEventListener("message",d)})),[e,d,t]),[a,i]}},59302:(e,t,a)=>{a.d(t,{f:()=>A});var n=a(82096),r=a(65594),l=a(90652),s=a(10782),i=a(54392),c=a(96232),o=a(90648),d=a(79764),u=a(24896),m=a(37012),p=a(13626),E=a(70892),f=a(96540);const b=(0,n.A)((e=>({monospace:{fontFamily:"monospace"}}))),A=e=>{const t=b(),a=(0,f.useMemo)((()=>e.commits.map((e=>({hash:e.hash,message:e.message,href:e.url,ts:new Date(e.ts)}))).map((e=>f.createElement(r.A,{key:e.hash},f.createElement(l.A,null,f.createElement(s.A,{href:e.href},f.createElement(i.A,{className:t.monospace},e.hash.substring(0,8)))),f.createElement(l.A,null,f.createElement(c.Ay,{title:e.message,placement:"bottom-start"},f.createElement(i.A,null,e.message.trim().split("\n")[0]))),f.createElement(l.A,null,f.createElement(c.Ay,{title:e.ts.toLocaleString()},f.createElement(i.A,null,0===(0,m.I)(e.ts,new Date)?(0,p.m)(e.ts,{addSuffix:!0}):(0,E.GP)(e.ts,"yyyy-MM-dd")))))))),[t.monospace,e.commits]);return f.createElement(o.A,null,f.createElement(d.A,{size:"small","aria-label":"commits list"},f.createElement(u.A,null,a)))}},69211:(e,t,a)=>{a.d(t,{K:()=>v});var n=a(82096),r=a(96232),l=a(33615),s=a(54392),i=a(90648),c=a(79764),o=a(24896),d=a(65594),u=a(90652),m=a(10782),p=a(26758),E=a(20053),f=a(96540),b=a(55765);const A=(0,n.A)((e=>({monospace:{fontFamily:"monospace"},chip:{borderRadius:"3px",fontWeight:"bold",width:"100%"},table:{width:"unset"},tableCell:{borderBottom:"none",padding:"3px"},linesAdded:{backgroundColor:"#cfc",color:"#399839"},linesRemoved:{backgroundColor:"#fdd",color:"#c33"},fileStatusAdded:{backgroundColor:"#fff",borderColor:"#60b070",color:"#14892c"},fileStatusModified:{backgroundColor:"#fff",borderColor:"#a5b3c2",color:"#4a6785"},fileStatusDeleted:{backgroundColor:"#fff",borderColor:"#e8a29b",color:"#d04437"},fileStatusRenamed:{backgroundColor:"#fff",borderColor:"#c0ad9d",color:"#815b3a"},fileStatusCopied:{backgroundColor:"#fff",borderColor:"#f2ae00",color:"#f29900"},fileStatusConflict:{backgroundColor:"#f6c342",borderColor:"#f6c342",color:"#594300"},fileStatusDefault:{backgroundColor:"#fff",borderColor:"#881be0",color:"#7a44a6"}}))),v=e=>{const t=A(),a=e=>{switch(e){case b.BM.ADDED:return"ADDED";case b.BM.MODIFIED:return"MODIFIED";case b.BM.DELETED:return"DELETED";case b.BM.RENAMED:return"RENAMED";case b.BM.COPIED:return"COPIED";case b.BM.CONFLICT:return"CONFLICT";default:return"UNKNOWN"}},n=e=>{switch(e){case b.BM.ADDED:return t.fileStatusAdded;case b.BM.MODIFIED:return t.fileStatusModified;case b.BM.DELETED:return t.fileStatusDeleted;case b.BM.RENAMED:return t.fileStatusRenamed;case b.BM.COPIED:return t.fileStatusCopied;case b.BM.CONFLICT:return t.fileStatusConflict;default:return t.fileStatusDefault}};return f.createElement(i.A,null,f.createElement(c.A,{size:"small",className:t.table,"aria-label":"commits list"},f.createElement(o.A,null,e.fileDiffs.map((i=>f.createElement(d.A,{key:i.file},f.createElement(u.A,{className:t.tableCell}),f.createElement(u.A,{className:t.tableCell,align:"center"},f.createElement(l.A,{className:(0,E.A)(t.chip,t.linesAdded),label:`+${i.linesAdded}`,size:"small"})),f.createElement(u.A,{className:t.tableCell,align:"center"},f.createElement(l.A,{className:(0,E.A)(t.chip,t.linesRemoved),label:`-${i.linesRemoved}`,size:"small"})),f.createElement(u.A,{className:t.tableCell},f.createElement(r.Ay,{title:`${a(i.status)} ${i.similarity?`(${i.similarity}% similar)`:""}`},f.createElement(l.A,{className:(0,E.A)(t.chip,n(i.status)),label:f.createElement(s.A,{className:t.monospace},i.status.substring(0,1)),size:"small",variant:"outlined"}))),f.createElement(u.A,{className:t.tableCell},i.isConflicted?f.createElement(r.Ay,{title:a(b.BM.CONFLICT)},f.createElement(l.A,{className:(0,E.A)(t.chip,n(b.BM.CONFLICT)),label:f.createElement(s.A,{className:t.monospace},a(b.BM.CONFLICT).substring(0,1)),size:"small",variant:"outlined"})):f.createElement("div",null)),f.createElement(u.A,{className:t.tableCell},f.createElement(m.A,{onClick:()=>e.openDiffHandler(i)},f.createElement(s.A,null,i.file))),f.createElement(u.A,{className:t.tableCell},f.createElement(p.A,{hidden:!i.hasComments},f.createElement(r.Ay,{title:"contains comments"},f.createElement(s.A,null,"\u{1f4ac}"))))))))))}},12805:(e,t,a)=>{a.r(t),a.d(t,{PullRequestDetailsPage:()=>kt,default:()=>St});var n=a(2948),r=a(82096),l=a(29984),s=a(61434),i=a(35376),c=a(26758),o=a(54392),d=a(10782),u=a(27606),m=a(3148),p=a(96746),E=a(96232),f=a(91004),b=a(83182),A=a(10476),v=a(96540),g=a(82782),h=a(14944),C=a(91024),y=a(42561),k=a(31783),S=a(30981);const w=(0,v.memo)((({title:e,subtitle:t,isDefaultExpanded:a,isLoading:n,hidden:r,children:l})=>{const[s,i]=(0,v.useState)(!!a),o=(0,v.useCallback)(((e,t)=>{i(t)}),[]);return v.createElement(c.A,{hidden:!n&&r},v.createElement(g.A,{square:!1,expanded:s,onChange:o},v.createElement(h.A,{expandIcon:v.createElement(y.A,null)},v.createElement(k.x,null,e),v.createElement(S.n,null,null!==t&&void 0!==t?t:"")),v.createElement(C.A,null,n?v.createElement(b.A,null):l)))}));var O=a(37262),I=a(10424),U=a(9603),D=a(77690);const R=({hidden:e,status:t,onApprove:a})=>{const n=(0,v.useCallback)((()=>{a("APPROVED"===t?"UNAPPROVED":"APPROVED")}),[a,t]);return v.createElement(c.A,{hidden:e},v.createElement(p.A,{startIcon:v.createElement(D.A,null),color:"primary",variant:"contained",onClick:n},v.createElement(o.A,{variant:"button",noWrap:!0},"APPROVED"===t?"Unapprove":"Approve")))};var N=a(70892),j=a(84929);const B=e=>e?"number"===typeof e?(0,N.GP)(new Date(e),"yyyy-MM-dd h:mm a"):(0,N.GP)((0,j.H)(e),"yyyy-MM-dd h:mm a"):"";var T=a(33615),x=a(4882);const M=({source:e,destination:t,author:a,isLoading:n})=>{let r="",l="";e.repo.url!==t.repo.url&&(r=e.repo.fullName+":",l=t.repo.fullName+":");const s=r+e.branchName,i=l+t.branchName;return n?v.createElement(b.A,null):v.createElement(u.A,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap"},v.createElement(u.A,{item:!0},v.createElement(E.Ay,{title:s},v.createElement(T.A,{clickable:!0,color:"primary",label:s,size:"small"}))),v.createElement(u.A,{item:!0},v.createElement(x.A,null)),v.createElement(u.A,{item:!0},v.createElement(E.Ay,{title:i},v.createElement(T.A,{clickable:!0,color:"primary",label:i,size:"small"}))))};var P=a(59302),L=a(69211),F=a(32118),z=a(5696),J=a(68016),$=a(83220),W=a(84630),q=a(90648),_=a(79764),V=a(24896),H=a(64794),G=a(65816),K=a(65594),Q=a(90652),Z=a(19371),X=a(79698),Y=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const ee=(0,r.A)((e=>({tableCell:{borderBottom:"none",align:"left"}}))),te=({issue:e,handleIssueTransition:t,onShouldTransitionChange:a})=>{const n=ee(),[r,l]=(0,v.useState)(!1),s=(0,v.useCallback)((()=>{l(!r)}),[r]),i=(0,v.useCallback)((a=>Y(void 0,void 0,void 0,(function*(){l(!0),t(e,a)}))),[e,t]);return(0,v.useEffect)((()=>{a(e.data.id,r)}),[e.data.id,r,a]),v.createElement(K.A,{key:e.data.id},v.createElement(Q.A,{className:n.tableCell},v.createElement(Z.A,{color:"primary",checked:r,onChange:s})),v.createElement(Q.A,{className:n.tableCell},v.createElement(o.A,null,v.createElement("strong",null,"#",e.data.id),": ",e.data.title)),v.createElement(Q.A,{className:n.tableCell},v.createElement(X.A,{fullWidth:!0,variant:"outlined",status:e.data.state,onChange:i})))};var ae=a(72007),ne=a(6651),re=a(75981);const le=(0,r.A)((e=>({tableCell:{borderBottom:"none",align:"align"}}))),se=({issue:e,handleIssueTransition:t,onShouldTransitionChange:a})=>{var n;const r=le(),[l,s]=(0,v.useState)(ae.rv),[i,d]=(0,v.useState)(!1),u=(0,v.useCallback)((()=>{d(!i)}),[i]),m=(0,v.useCallback)((a=>{s(a.target.value),t(e,a.target.value),d(!0)}),[s,t,e]);return(0,v.useEffect)((()=>{var t;(null===(t=e.transitions)||void 0===t?void 0:t.length)>0?s(e.transitions.find((t=>t.to.id===e.status.id))||e.transitions[0]):s(ae.rv)}),[e]),(0,v.useEffect)((()=>{a(e.id,i)}),[e.id,i,a]),(null===(n=e.transitions)||void 0===n?void 0:n.length)<1?v.createElement(c.A,null):v.createElement(K.A,{key:e.id},v.createElement(Q.A,{className:r.tableCell},v.createElement(Z.A,{color:"primary",checked:i,onChange:u})),v.createElement(Q.A,{className:r.tableCell},v.createElement(o.A,null,v.createElement("strong",null,e.key),": ",e.summary)),v.createElement(Q.A,{className:r.tableCell},v.createElement($.A,{select:!0,value:l,onChange:m},(e.transitions||[ae.rv]).map((e=>v.createElement(W.A,{key:e.id,value:e},v.createElement(re.A,{appearance:ne.zK[e.to.statusCategory.colorName],label:e.to.name})))))))};var ie=a(13118);const ce=({prData:e})=>{const{taskCount:t,participants:a,buildStatuses:n}=e,r=t,l=a.filter((e=>"APPROVED"===e.status)).length,s=a.filter((e=>"NEEDS_WORK"===e.status)).length;let i=!1;if(Array.isArray(n)&&n.length>0){const e=n.filter((e=>"SUCCESSFUL"===e.state));i=n.length!==e.length}const c=l>0&&0===r&&0===s&&!i;return v.createElement(ie.A,{variant:"standard",severity:c?"success":"warning"},v.createElement(o.A,null,0===l?"Pull request has no approvals":`Pull request has ${l} ${1===l?"approval":"approvals"}`),r>0&&v.createElement(o.A,null,"Pull request has unresolved tasks"),s>0&&v.createElement(o.A,null,"Pull request has been marked as - Needs work"),i&&v.createElement(o.A,null,"Pull request has unsuccessful builds"))},oe=(0,r.A)((e=>({table:{width:"unset"}}))),de={label:"Default merge strategy",value:"",isDefault:!1},ue=({prData:e,commits:t,relatedJiraIssues:a,relatedBitbucketIssues:r,mergeStrategies:l,loadState:s,merge:i})=>{const d=oe(),[m,E]=(0,v.useState)(!1),[f,A]=(0,v.useState)(""),[g,h]=(0,v.useState)(de),[C,y]=(0,v.useState)(!1),[k,S]=(0,v.useState)(a),[w,O]=(0,v.useState)(r),[I]=(0,v.useState)(new Map),[U]=(0,v.useState)(new Map),[D,R]=(0,v.useState)(!0),N=(0,v.useCallback)((()=>{const e=k.filter((e=>I.get(e.id))),t=w.filter((e=>U.get(e.data.id)));y(!0),i(g,f,D,[...e,...t]),E(!1)}),[i,E,g,f,D,k,w,I,U]),j=(0,v.useCallback)((()=>{E(!1)}),[E]),B=(0,v.useCallback)((()=>{E(!0)}),[E]),T=(0,v.useCallback)((e=>{h(e.target.value)}),[]),x=(0,v.useCallback)((e=>{A(e)}),[]),M=(0,v.useCallback)((e=>""===e.trim()),[]),P=(0,v.useCallback)((a=>{const n=a.value;if("fast_forward"===n)return"";const{id:r,source:l,title:s,participants:i}=e;let c=`${`Merged in ${l&&l.branchName}`} ${`(pull request #${r})`}\n\n${s}`;if("squash"===n&&(1!==t.length||t[0].message!==s)){c+=`\n\n${t.reverse().map((e=>`* ${e.message}`)).join("\n")}`}const o=i.filter((e=>"APPROVED"===e.status));if(o.length>0){c+=`\n\n${o.map((e=>`Approved-by: ${e.displayName}`)).join("\n")}`}return c}),[t,e]),L=(0,v.useCallback)(((e,t)=>{const a=k.map((a=>a.key===e.key?Object.assign(Object.assign({},a),{status:Object.assign(Object.assign({},a.status),{id:t.to.id,name:t.to.name})}):a));S(a)}),[k]),K=(0,v.useCallback)(((e,t)=>{const a=w.map((a=>a.data.id===e.data.id?Object.assign(Object.assign({},a),{data:Object.assign(Object.assign({},a.data),{state:t})}):a));O(a)}),[w]),Q=(0,v.useCallback)(((e,t)=>{I.set(e,t)}),[I]),Z=(0,v.useCallback)(((e,t)=>{U.set(e,t)}),[U]),X=(0,v.useCallback)((()=>R(!D)),[D]);return(0,v.useEffect)((()=>{a.forEach((e=>I.set(e.id,!0))),S(a)}),[a,I]),(0,v.useEffect)((()=>{r.forEach((e=>U.set(e.data.id,!0))),O(r)}),[r,U]),(0,v.useEffect)((()=>{A(P(g))}),[P,A,g]),(0,v.useEffect)((()=>{y(!1)}),[e.state]),(0,v.useEffect)((()=>{R(e.closeSourceBranch)}),[e.closeSourceBranch]),(0,v.useEffect)((()=>{if(g.value===de.value){const e=l.find((e=>!0===e.isDefault));h(null!==e&&void 0!==e?e:de)}}),[l,g]),v.createElement(c.A,null,v.createElement(c.A,{hidden:s.basicData},v.createElement(p.A,{color:"primary",variant:"contained",onClick:B,disabled:"OPEN"!==e.state||C},v.createElement(o.A,{variant:"button",noWrap:!0},"OPEN"===e.state?"Merge":"Merged"))),v.createElement(c.A,{hidden:!s.basicData},v.createElement(b.A,null)),v.createElement(F.A,{open:m,onClose:j,fullWidth:!0,maxWidth:"md","aria-labelledby":"merge-dialog-title"},v.createElement(z.A,null,v.createElement(o.A,{variant:"h4"},"Merge Pull Request")),v.createElement(J.A,null,v.createElement(ce,{prData:e}),v.createElement(c.A,{marginTop:5}),v.createElement(u.A,{container:!0,spacing:1,direction:"column",alignItems:"stretch"},v.createElement(u.A,{item:!0},v.createElement(c.A,{hidden:s.mergeStrategies},v.createElement($.A,{select:!0,value:g,onChange:T,fullWidth:!0,size:"small",label:"Merge Strategy"},v.createElement(W.A,{key:de.label,value:de,disabled:!0},"Select a merge strategy"),l.map((e=>v.createElement(W.A,{key:e.label,value:e},e.label))))),v.createElement(c.A,{hidden:!s.mergeStrategies},v.createElement(b.A,null))),v.createElement(u.A,{item:!0},v.createElement(c.A,{hidden:!s.commits},v.createElement(b.A,null)),v.createElement(c.A,{hidden:s.commits},v.createElement(n.wI,{fullWidth:!0,multiline:!0,rows:5,defaultValue:f,onSave:x,placeholder:"Enter commit message",saveDisabled:M,label:"Commit Message"}))),v.createElement(u.A,{item:!0},v.createElement(c.A,{hidden:!s.relatedJiraIssues&&!s.relatedBitbucketIssues},v.createElement(b.A,null)),v.createElement(c.A,{hidden:s.relatedJiraIssues||s.relatedBitbucketIssues},v.createElement(c.A,{marginTop:3,hidden:!(k.length>0||w.length>0)},v.createElement(o.A,{variant:"h5"},"Transition issues")),v.createElement(q.A,null,v.createElement(_.A,{size:"small","aria-label":"issues to transition"},v.createElement(V.A,{className:d.table},k.map((e=>v.createElement(se,{issue:e,handleIssueTransition:L,onShouldTransitionChange:Q,key:e.key}))),w.map((e=>v.createElement(te,{issue:e,handleIssueTransition:K,onShouldTransitionChange:Z,key:e.data.id})))))))),v.createElement(u.A,{item:!0},v.createElement(n.V_,{control:v.createElement(H.A,{size:"small",color:"primary",value:"Close source branch",checked:D,onChange:X}),label:"Close source branch",spacing:1,variant:"body1"})))),v.createElement(G.A,null,v.createElement(p.A,{variant:"contained",onClick:j,color:"primary"},"Cancel"),v.createElement(p.A,{variant:"contained",onClick:N,color:"primary"},"Merge"))))};var me=a(17786);const pe=({hidden:e,status:t,onApprove:a})=>{const n=(0,v.useCallback)((()=>{a("NEEDS_WORK"===t?"UNAPPROVED":"NEEDS_WORK")}),[a,t]);return v.createElement(c.A,{hidden:e},v.createElement(p.A,{startIcon:v.createElement(me.A,null),color:"primary",variant:"contained",onClick:n},v.createElement(o.A,{variant:"button",noWrap:!0},"NEEDS_WORK"===t?"Remove Needs work":"Mark as Needs work")))};var Ee=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const fe=({task:e,onEdit:t,onDelete:a})=>{const[n,r]=(0,v.useState)(!1),[l,s]=(0,v.useState)(!1),[i,d]=(0,v.useState)(e.content),m=(0,v.useCallback)((()=>{r(!n)}),[n]),E=(0,v.useCallback)((()=>Ee(void 0,void 0,void 0,(function*(){s(!0),yield t(Object.assign(Object.assign({},e),{content:i})),r(!1)}))),[i,e,t]),f=(0,v.useCallback)((()=>{r(!1)}),[]),A=(0,v.useCallback)((()=>Ee(void 0,void 0,void 0,(function*(){s(!0),yield a(e)}))),[e,a]),g=(0,v.useCallback)((()=>Ee(void 0,void 0,void 0,(function*(){s(!0),yield t(Object.assign(Object.assign({},e),{isComplete:!e.isComplete}))}))),[e,t]),h=(0,v.useCallback)((e=>{d(e.target.value)}),[d]);return(0,v.useEffect)((()=>{d(e.content),s(!1)}),[e]),v.createElement(v.Fragment,null,v.createElement(c.A,{hidden:n},v.createElement(u.A,{container:!0,spacing:1,direction:"row",alignItems:"baseline"},v.createElement(u.A,{item:!0},v.createElement(Z.A,{color:"primary",checked:e.isComplete,onChange:g,disabled:l})),v.createElement(u.A,{item:!0},v.createElement(u.A,{container:!0,direction:"column"},l?v.createElement(b.A,null):v.createElement(o.A,{variant:"body1"},e.content),v.createElement(u.A,{item:!0},v.createElement(u.A,{container:!0,direction:"row"},v.createElement(u.A,{item:!0,hidden:!e.editable},v.createElement(p.A,{color:"primary",onClick:m,disabled:l},"Edit")),v.createElement(u.A,{item:!0,hidden:!e.deletable},v.createElement(p.A,{color:"primary",onClick:A,disabled:l},"Delete")))))))),v.createElement(c.A,{hidden:!n},v.createElement(u.A,{container:!0,spacing:1,direction:"row",alignItems:"flex-start"},v.createElement(Z.A,{color:"primary",disabled:!0}),v.createElement(u.A,{item:!0,xs:!0},v.createElement(u.A,{container:!0,direction:"column"},l?v.createElement(b.A,null):v.createElement($.A,{size:"small",value:i,onChange:h,name:"content"}),v.createElement(u.A,{item:!0},v.createElement(u.A,{container:!0,direction:"row"},v.createElement(u.A,{item:!0},v.createElement(p.A,{color:"primary",onClick:E,disabled:""===i.trim()||l},"Save")),v.createElement(u.A,{item:!0},v.createElement(p.A,{color:"primary",onClick:f,disabled:l},"Cancel")))))))))},be=({tasks:e,onEdit:t,onDelete:a})=>v.createElement(u.A,{container:!0,spacing:1,direction:"column",justify:"center"},e.map((e=>v.createElement(u.A,{key:e.id,item:!0},v.createElement(fe,{task:e,onEdit:t,onDelete:a})))));var Ae,ve=a(9361),ge=a(68414),he=a(50569);!function(e){e.FetchUsersRequest="fetchUsersRequest",e.UpdateSummaryRequest="updateSummaryRequest",e.UpdateTitleRequest="updateTitleRequest",e.UpdateReviewers="updateReviewers",e.UpdateApprovalStatus="updateApprovalStatus",e.CheckoutBranch="checkoutBranch",e.PostComment="postComment",e.EditComment="editComment",e.DeleteComment="deleteComment",e.AddTask="addTask",e.EditTask="editTask",e.DeleteTask="deleteTask",e.OpenDiffRequest="openDiffRequest",e.Merge="merge",e.OpenJiraIssue="openJiraIssue",e.OpenBitbucketIssue="openBitbucketIssue",e.OpenBuildStatus="openBuildStatus"}(Ae||(Ae={}));var Ce,ye=a(55765);!function(e){e.Init="init",e.FetchUsersResponse="fetchUsersResponse",e.PostCommentResponse="postCommentResponse",e.EditCommentResponse="editCommentResponse",e.DeleteCommentResponse="deleteCommentResponse",e.AddTaskResponse="addTaskResponse",e.EditTaskResponse="editTaskResponse",e.DeleteTaskResponse="deleteTaskResponse",e.UpdateReviewersResponse="updateReviewersResponse",e.UpdateSummary="updateSummary",e.UpdateTitle="updateTitle",e.UpdateCommits="updateCommits",e.UpdateReviewers="updateReviewers",e.UpdateApprovalStatus="updateApprovalStatus",e.CheckoutBranch="checkoutBranch",e.UpdateComments="updateComments",e.UpdateFileDiffs="updateFileDiffs",e.UpdateBuildStatuses="updateBuildStatuses",e.UpdateMergeStrategies="updateMergeStrategies",e.UpdateRelatedJiraIssues="updateRelatedJiraIssues",e.UpdateRelatedBitbucketIssues="updateRelatedBitbucketIssues",e.UpdateTasks="updateTasks"}(Ce||(Ce={}));const ke={pr:ye.GT,commits:[],currentUser:ye.F2,currentBranchName:"",comments:[],fileDiffs:[],mergeStrategies:[],buildStatuses:[],relatedJiraIssues:[],relatedBitbucketIssues:[],tasks:[],loadState:{basicData:!0,comments:!0,commits:!0,tasks:!0,relatedJiraIssues:!0,relatedBitbucketIssues:!0,diffs:!0,mergeStrategies:!0,buildStatuses:!0}};var Se=a(27030),we=a(3119),Oe=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const Ie={postMessage:e=>{},refresh:()=>{},copyLink:()=>{},fetchUsers:(e,t,a)=>Oe(void 0,void 0,void 0,(function*(){return[]})),updateSummary:e=>Oe(void 0,void 0,void 0,(function*(){})),updateTitle:e=>Oe(void 0,void 0,void 0,(function*(){})),updateReviewers:e=>Oe(void 0,void 0,void 0,(function*(){})),updateApprovalStatus:e=>{},checkoutBranch:()=>{},postComment:(e,t)=>Oe(void 0,void 0,void 0,(function*(){})),editComment:(e,t)=>Oe(void 0,void 0,void 0,(function*(){})),deleteComment:e=>Oe(void 0,void 0,void 0,(function*(){})),addTask:(e,t)=>Oe(void 0,void 0,void 0,(function*(){})),editTask:e=>Oe(void 0,void 0,void 0,(function*(){})),deleteTask:e=>Oe(void 0,void 0,void 0,(function*(){})),openDiff:e=>{},merge:(e,t,a,n)=>{},openJiraIssue:e=>{},openBitbucketIssue:e=>{},openBuildStatus:e=>{}},Ue=v.createContext(Ie),De=Object.assign({},ke);var Re;function Ne(e,t){switch(t.type){case Re.Init:return Object.assign(Object.assign(Object.assign({},e),t.data),{loadState:Object.assign(Object.assign({},t.data.loadState),{basicData:!1}),isErrorBannerOpen:!1,errorDetails:void 0});case Re.Loading:return Object.assign(Object.assign({},e),{isSomethingLoading:!0});case Re.UpdateSummary:return Object.assign(Object.assign({},e),{pr:Object.assign(Object.assign({},e.pr),{data:Object.assign(Object.assign({},e.pr.data),{htmlSummary:t.data.htmlSummary,rawSummary:t.data.rawSummary})})});case Re.UpdateTitle:return Object.assign(Object.assign({},e),{pr:Object.assign(Object.assign({},e.pr),{data:Object.assign(Object.assign({},e.pr.data),{title:t.data.title})})});case Re.UpdateReviewers:return Object.assign(Object.assign({},e),{pr:Object.assign(Object.assign({},e.pr),{data:Object.assign(Object.assign({},e.pr.data),{participants:t.data.reviewers})})});case Re.UpdateApprovalStatus:{const a=e.currentUser.accountId,n=void 0===e.pr.data.participants.find((e=>e.accountId===a))?[...e.pr.data.participants,Object.assign(Object.assign({},e.currentUser),{status:t.data.status,role:"PARTICIPANT"})]:e.pr.data.participants.map((a=>a.accountId===e.currentUser.accountId?Object.assign(Object.assign({},a),{status:t.data.status}):a));return Object.assign(Object.assign({},e),{pr:Object.assign(Object.assign({},e.pr),{data:Object.assign(Object.assign({},e.pr.data),{participants:n})})})}case Re.CheckoutBranch:return Object.assign(Object.assign({},e),{currentBranchName:t.data.branchName});case Re.UpdateCommits:return Object.assign(Object.assign({},e),{commits:t.data.commits,loadState:Object.assign(Object.assign({},e.loadState),{commits:!1})});case Re.UpdateComments:return Object.assign(Object.assign({},e),{comments:t.data.comments,loadState:Object.assign(Object.assign({},e.loadState),{comments:!1})});case Re.UpdateTasks:return Object.assign(Object.assign({},e),{comments:t.data.comments,tasks:t.data.tasks,loadState:Object.assign(Object.assign({},e.loadState),{tasks:!1})});case Re.UpdateFileDiffs:return Object.assign(Object.assign({},e),{fileDiffs:t.data.fileDiffs,loadState:Object.assign(Object.assign({},e.loadState),{diffs:!1})});case Re.UpdateBuildStatuses:return Object.assign(Object.assign({},e),{buildStatuses:t.data.buildStatuses,loadState:Object.assign(Object.assign({},e.loadState),{buildStatuses:!1})});case Re.UpdateMergeStrategies:return Object.assign(Object.assign({},e),{mergeStrategies:t.data.mergeStrategies,loadState:Object.assign(Object.assign({},e.loadState),{mergeStrategies:!1})});case Re.UpdateRelatedJiraIssues:return Object.assign(Object.assign({},e),{relatedJiraIssues:t.data.relatedIssues,loadState:Object.assign(Object.assign({},e.loadState),{relatedJiraIssues:!1})});case Re.UpdateRelatedBitbucketIssues:return Object.assign(Object.assign({},e),{relatedBitbucketIssues:t.data.relatedIssues,loadState:Object.assign(Object.assign({},e.loadState),{relatedBitbucketIssues:!1})});default:return(0,ve.y)(e,t)}}!function(e){e.Init="init",e.ConfigChange="configChange",e.Loading="loading",e.UpdateSummary="updateSummary",e.UpdateTitle="updateTitle",e.UpdateCommits="updateCommits",e.UpdateReviewers="updateReviewers",e.UpdateApprovalStatus="updateApprovalStatus",e.CheckoutBranch="checkoutBranch",e.UpdateComments="updateComments",e.UpdateTasks="updateTasks",e.AddComment="addComment",e.UpdateFileDiffs="updateFileDiffs",e.UpdateBuildStatuses="updateBuildStatuses",e.UpdateMergeStrategies="updateMergeStrategies",e.UpdateRelatedJiraIssues="updateRelatedJiraIssues",e.UpdateRelatedBitbucketIssues="updateRelatedBitbucketIssues"}(Re||(Re={}));var je=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const Be=({addTask:e,handleCancel:t})=>{const[a,n]=(0,v.useState)(!1),[r,l]=(0,v.useState)(""),s=(0,v.useCallback)((()=>je(void 0,void 0,void 0,(function*(){n(!0);try{yield e(r)}finally{l(""),n(!1)}}))),[r,e]),i=(0,v.useCallback)((()=>{t()}),[t]),c=(0,v.useCallback)((e=>{l(e.target.value)}),[l]);return v.createElement(u.A,{container:!0,spacing:1,direction:"row",alignItems:"flex-start"},v.createElement(Z.A,{color:"primary",disabled:!0}),v.createElement(u.A,{item:!0,xs:!0},v.createElement(u.A,{container:!0,direction:"column"},a?v.createElement(b.A,null):v.createElement($.A,{size:"small",value:r,onChange:c,name:"content",autoComplete:"off"}),v.createElement(u.A,{item:!0},v.createElement(u.A,{container:!0,direction:"row"},v.createElement(u.A,{item:!0},v.createElement(p.A,{color:"primary",onClick:s,disabled:""===r.trim()||a},"Save")),v.createElement(u.A,{item:!0},v.createElement(p.A,{color:"primary",onClick:i,disabled:a},"Cancel")))))))};var Te=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const xe=({comment:e,currentUser:t,fetchUsers:a,onDelete:n})=>{const[r,l]=(0,v.useState)(!1),[s,i]=(0,v.useState)(!1),[d,m]=(0,v.useState)(!1),[E,A]=(0,v.useState)(!1),g=(0,v.useContext)(Ue),h=(0,v.useCallback)((()=>{l(!0)}),[]),C=(0,v.useCallback)((()=>{m(!0)}),[]),y=(0,v.useCallback)((()=>{m(!1)}),[]),k=(0,v.useCallback)((t=>Te(void 0,void 0,void 0,(function*(){yield g.addTask(t,e.id),m(!1)}))),[g,e.id]),S=(0,v.useCallback)((t=>Te(void 0,void 0,void 0,(function*(){yield g.postComment(t,e.id),l(!1)}))),[g,e.id]),w=(0,v.useCallback)((()=>{i(!0)}),[]),I=(0,v.useCallback)((t=>Te(void 0,void 0,void 0,(function*(){yield g.editComment(t,e.id),i(!1)}))),[g,e.id]),U=(0,v.useCallback)((()=>{i(!1)}),[]),D=(0,v.useCallback)((()=>{l(!1)}),[]),R=(0,v.useCallback)((()=>Te(void 0,void 0,void 0,(function*(){A(!0),yield n(e)}))),[e,n]);return(0,v.useEffect)((()=>{A(!1)}),[e]),v.createElement(v.Fragment,null,v.createElement(c.A,{hidden:s},v.createElement(u.A,{container:!0,spacing:1,direction:"row",alignItems:"flex-start"},v.createElement(u.A,{item:!0},v.createElement(f.A,{src:e.user.avatarUrl,alt:e.user.displayName})),v.createElement(u.A,{item:!0},v.createElement(u.A,{container:!0,direction:"column"},v.createElement(u.A,{item:!0},v.createElement(o.A,{variant:"subtitle2"},e.user.displayName,"  ",B(e.ts))),v.createElement(c.A,{hidden:!E},v.createElement(b.A,null)),v.createElement(c.A,{hidden:E},v.createElement(o.A,{dangerouslySetInnerHTML:{__html:e.htmlContent}})),v.createElement(u.A,{item:!0},v.createElement(u.A,{container:!0,direction:"row"},v.createElement(u.A,{item:!0},v.createElement(p.A,{color:"primary",onClick:h},"Reply")),v.createElement(u.A,{item:!0},v.createElement(c.A,{hidden:!e.editable},v.createElement(p.A,{color:"primary",onClick:w},"Edit"))),v.createElement(u.A,{item:!0},v.createElement(c.A,{hidden:e.deleted||!e.deletable},v.createElement(p.A,{color:"primary",onClick:R},"Delete"))),v.createElement(u.A,{item:!0},v.createElement(c.A,{marginLeft:2},v.createElement(p.A,{color:"primary",onClick:C},"Create Task"))))))))),v.createElement(c.A,{hidden:!s},v.createElement(u.A,{item:!0},v.createElement(O.A,{initialContent:e.rawContent,currentUser:t,onSave:I,onCancel:U,fetchUsers:a}))),v.createElement(c.A,{hidden:!d},v.createElement(u.A,{item:!0},v.createElement(Be,{handleCancel:y,addTask:k}))),v.createElement(u.A,{item:!0},v.createElement(be,{tasks:e.tasks,onEdit:g.editTask,onDelete:g.deleteTask})),v.createElement(c.A,{hidden:!r},v.createElement(u.A,{item:!0},v.createElement(c.A,{marginLeft:5},v.createElement(O.A,{currentUser:t,onSave:S,onCancel:D,fetchUsers:a})))),v.createElement(c.A,{hidden:0===e.children.length},v.createElement(u.A,{item:!0},v.createElement(c.A,{marginLeft:5},v.createElement(Me,{comments:e.children,currentUser:t,onDelete:n,fetchUsers:a})))))},Me=({comments:e,currentUser:t,fetchUsers:a,onDelete:n})=>v.createElement(u.A,{container:!0,spacing:1,direction:"column",justify:"center"},e.map((e=>v.createElement(u.A,{item:!0,key:e.id},v.createElement(xe,{comment:e,currentUser:t,fetchUsers:a,onDelete:n})))));var Pe=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const Le=({tasks:e,onEdit:t,onDelete:a})=>{const[n,r]=(0,v.useState)(!1),l=(0,v.useContext)(Ue),s=(0,v.useCallback)((()=>{r(!0)}),[]),i=(0,v.useCallback)((()=>{r(!1)}),[]),c=(0,v.useCallback)((e=>Pe(void 0,void 0,void 0,(function*(){yield l.addTask(e),r(!1)}))),[l]);return v.createElement(u.A,{container:!0,spacing:1,direction:"column",justify:"center"},e.map((e=>v.createElement(u.A,{key:e.id,item:!0},v.createElement(fe,{task:e,onEdit:t,onDelete:a})))),n&&v.createElement(u.A,{item:!0},v.createElement(Be,{handleCancel:i,addTask:c})),v.createElement(u.A,{item:!0},v.createElement(p.A,{color:"primary",variant:"contained",onClick:s,disabled:n},"Add Task")))};var Fe=a(16064),ze=a(99549);const Je=v.createElement(D.A,{style:{color:"green"}}),$e=v.createElement(ze.A,{style:{color:"blue"}}),We=v.createElement(Fe.A,{style:{color:"red"}}),qe=({buildStatuses:e,openBuildStatus:t})=>v.createElement(u.A,{container:!0,direction:"column",spacing:1},e.map((e=>v.createElement(u.A,{item:!0,key:e.url},v.createElement(p.A,{onClick:()=>t(e),color:"primary",startIcon:"INPROGRESS"===e.state?$e:"SUCCESSFUL"===e.state?Je:We},v.createElement(o.A,{variant:"button"},e.name)))))),_e={new:v.createElement(re.A,{appearance:"new",label:"new"}),open:v.createElement(re.A,{appearance:"inprogress",label:"open"}),resolved:v.createElement(re.A,{appearance:"success",label:"resolved"}),"on hold":v.createElement(re.A,{appearance:"default",label:"on hold"}),invalid:v.createElement(re.A,{appearance:"moved",label:"invalid"}),duplicate:v.createElement(re.A,{appearance:"default",label:"duplicate"}),wontfix:v.createElement(re.A,{appearance:"removed",label:"wontfix"}),closed:v.createElement(re.A,{appearance:"default",label:"closed"})},Ve=(0,r.A)((e=>({table:{width:"unset"},tableCell:{borderBottom:"none",align:"left"}}))),He=({relatedIssues:e,openBitbucketIssue:t})=>{const a=Ve();return v.createElement(q.A,null,v.createElement(_.A,{size:"small","aria-label":"related jira issues",className:a.table},v.createElement(V.A,null,e.map((e=>v.createElement(K.A,{key:e.data.id},v.createElement(Q.A,{align:"left"},v.createElement(d.A,{href:"#",onClick:()=>t(e)},v.createElement(o.A,null,"#",e.data.id))),v.createElement(Q.A,{align:"left"},v.createElement(o.A,null,e.data.title)),v.createElement(Q.A,{align:"left"},v.createElement(E.Ay,{title:`Priority: ${e.data.priority}`},v.createElement(o.A,null,e.data.priority))),v.createElement(Q.A,{align:"left"},_e[e.data.state])))))))},Ge=(0,r.A)((e=>({table:{width:"unset"},tableCell:{borderBottom:"none"}}))),Ke=({relatedIssues:e,openJiraIssue:t})=>{const a=Ge();return v.createElement(q.A,null,v.createElement(_.A,{size:"small","aria-label":"related jira issues",className:a.table},v.createElement(V.A,null,e.map((e=>v.createElement(K.A,{key:e.id},v.createElement(Q.A,{align:"left",className:a.tableCell},v.createElement(c.A,{width:16,height:16},v.createElement(E.Ay,{title:e.issuetype.name},v.createElement("img",{style:{width:"100%"},src:e.issuetype.iconUrl})))),v.createElement(Q.A,{align:"left",className:a.tableCell},v.createElement(d.A,{href:"#",onClick:()=>t(e)},v.createElement(o.A,null,e.key))),v.createElement(Q.A,{align:"left",className:a.tableCell},v.createElement(o.A,null,e.summary)),v.createElement(Q.A,{align:"left",className:a.tableCell},v.createElement(c.A,{width:16,height:16},v.createElement(E.Ay,{title:`Priority: ${e.priority.name}`},v.createElement("img",{style:{width:"100%"},src:e.priority.iconUrl})))),v.createElement(Q.A,{align:"left",className:a.tableCell},v.createElement(re.A,{appearance:ne.zK[e.status.statusCategory.colorName],label:e.status.name}))))))))};var Qe=a(36936),Ze=a(58168),Xe=a(80045),Ye=(a(44363),a(20053)),et=a(35192),tt={small:-16,medium:null},at=v.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,l=e.max,s=void 0===l?5:l,i=e.spacing,c=void 0===i?"medium":i,o=(0,Xe.A)(e,["children","classes","className","max","spacing"]),d=s<2?2:s,u=v.Children.toArray(a).filter((function(e){return v.isValidElement(e)})),m=u.length>d?u.length-d+1:0;return v.createElement("div",(0,Ze.A)({className:(0,Ye.A)(n.root,r),ref:t},o),u.slice(0,u.length-m).map((function(e,t){return v.cloneElement(e,{className:(0,Ye.A)(e.props.className,n.avatar),style:(0,Ze.A)({zIndex:u.length-t,marginLeft:c&&void 0!==tt[c]?tt[c]:-c},e.props.style)})})),m?v.createElement(f.A,{className:n.avatar,style:{zIndex:0,marginLeft:c&&void 0!==tt[c]?tt[c]:-c}},"+",m):null)}));const nt=(0,et.A)((function(e){return{root:{display:"flex"},avatar:{border:"2px solid ".concat(e.palette.background.default),marginLeft:-8}}}),{name:"MuiAvatarGroup"})(at);var rt=a(29459),lt=a(31456),st=a(19877),it=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const ct=e=>{const t=(0,v.useContext)(Ue),[a,n]=(0,v.useState)(!1),[r,l]=(0,v.useState)(""),[s,i]=(0,v.useState)([]),c=(0,st.A)((()=>(0,A.A)(((e,a,n)=>it(void 0,void 0,void 0,(function*(){return yield t.fetchUsers(e,a,n)}))),300,{leading:!1}))),d=(0,v.useCallback)((()=>it(void 0,void 0,void 0,(function*(){return e.onChange(s)}))),[s,e]),m=(0,v.useCallback)(((e,t)=>{"change"===(null===e||void 0===e?void 0:e.type)&&l(t)}),[l]),E=(0,lt.useAsyncAbortable)((t=>it(void 0,void 0,void 0,(function*(){if(r.length>1&&e.site){return yield c(e.site,r,t)}return e.defaultUsers}))),[e.site,r]),b=(0,v.useCallback)(((e,t)=>{i(t)}),[]),g=(0,v.useCallback)((()=>{e.onClose()}),[e]);return(0,v.useEffect)((()=>{i(e.users)}),[e.users]),v.createElement(F.A,{fullWidth:!0,maxWidth:"sm",open:e.hidden,onClose:g,"aria-labelledby":"reviewers-dialog-title"},v.createElement(z.A,null,v.createElement(o.A,{variant:"h4"},"Select Reviewers")),v.createElement(J.A,null,v.createElement(rt.Ay,{multiple:!0,filterSelectedOptions:!0,size:"medium",disableClearable:!0,open:a,onOpen:()=>n(!0),onClose:()=>n(!1),options:E.result||e.defaultUsers,getOptionLabel:e=>(null===e||void 0===e?void 0:e.displayName)||"",getOptionSelected:(e,t)=>e.accountId===t.accountId,value:s,onInputChange:m,onChange:b,loading:E.loading,renderInput:e=>v.createElement($.A,Object.assign({},e,{label:"Reviewers"})),renderOption:e=>v.createElement(u.A,{container:!0,spacing:1,direction:"row",alignItems:"center"},v.createElement(u.A,{item:!0},v.createElement(f.A,{src:null===e||void 0===e?void 0:e.avatarUrl})),v.createElement(u.A,{item:!0},v.createElement(o.A,null,null===e||void 0===e?void 0:e.displayName)))})),v.createElement(G.A,null,v.createElement(p.A,{onClick:g,color:"default",variant:"contained"},"Cancel"),v.createElement(p.A,{onClick:d,color:"primary",variant:"contained"},"Ok")))};var ot=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const dt=({site:e,reviewers:t,updateReviewers:a})=>{const[n,r]=(0,v.useState)(!1),l=(0,v.useCallback)((e=>ot(void 0,void 0,void 0,(function*(){r(!1),yield a(e)}))),[a]),s=(0,v.useCallback)((()=>{r(!0)}),[r]),i=(0,v.useCallback)((()=>{r(!1)}),[r]);return v.createElement(v.Fragment,null,v.createElement(E.Ay,{title:"Add Reviewers"},v.createElement(p.A,{color:"primary",onClick:s,value:"Add Reviewers"},v.createElement(o.A,{variant:"button"},"Add Reviewers"))),v.createElement(ct,{site:e,users:t,defaultUsers:[],onChange:l,hidden:n,onClose:i}))};var ut=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const mt=({site:e,onUpdateReviewers:t,participants:a,isLoading:n})=>{const[r,l]=(0,v.useState)([]),[s,i]=(0,v.useState)(!1),d=(0,v.useCallback)((e=>ut(void 0,void 0,void 0,(function*(){i(!0);try{yield t(e)}finally{i(!1)}}))),[t]);return(0,v.useEffect)((()=>{l(a.filter((e=>"UNAPPROVED"!==e.status||"REVIEWER"===e.role)).sort(((e,t)=>e.status<t.status?0:1)))}),[a]),v.createElement(u.A,{container:!0,direction:"row",spacing:2,alignItems:"center"},n||s?v.createElement(u.A,{item:!0},v.createElement(b.A,null)):v.createElement(u.A,{item:!0},0===r.length?v.createElement(o.A,{variant:"body2"},"No reviewers!"):v.createElement(nt,{max:5},r.map((e=>v.createElement(Qe.A,{style:{borderWidth:"0px"},overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},invisible:"APPROVED"!==e.status,key:e.accountId,badgeContent:v.createElement(E.Ay,{title:"Approved"},v.createElement(c.A,{bgcolor:"white",borderRadius:"100%"},v.createElement(D.A,{fontSize:"small",htmlColor:"#07b82b"})))},v.createElement(E.Ay,{title:e.displayName},v.createElement(f.A,{alt:e.displayName,src:e.avatarUrl}))))))),v.createElement(u.A,{item:!0},v.createElement(dt,{site:e,reviewers:r,updateReviewers:d})))};var pt=a(19773),Et=a(7756),ft=a(8949),bt=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const At=(0,r.A)((e=>({container:{borderWidth:1,borderRadius:4,borderStyle:"solid",borderColor:"transparent","&:hover":{borderColor:"initial"}},editbutton:{cursor:"pointer",height:"100%",display:"flex","align-items":"center","background-color":"dark"===e.palette.type?(0,pt.a)(e.palette.background.default,.15):(0,pt.e$)(e.palette.background.default,.15)}}))),vt=e=>{const t=At(),[a,n]=(0,v.useState)(!1),[r,l]=(0,v.useState)(!1),s=(0,v.useCallback)((()=>n(!0)),[]),i=(0,v.useCallback)((()=>n(!1)),[]),d=(0,v.useCallback)((()=>l(!0)),[]),m=(0,v.useCallback)((()=>l(!1)),[]),p=(0,v.useCallback)((t=>bt(void 0,void 0,void 0,(function*(){var a;yield null===(a=e.onSave)||void 0===a?void 0:a.call(e,t),i()}))),[i,e.onSave]);return a?v.createElement(ft.n,{initialContent:e.rawContent,onSave:p,onCancel:i,fetchUsers:e.fetchUsers}):v.createElement(u.A,{container:!0,spacing:1,direction:"row",className:t.container,onMouseEnter:d,onMouseLeave:m},v.createElement(u.A,{item:!0,xs:!0},v.createElement(o.A,{variant:"body1",dangerouslySetInnerHTML:{__html:e.htmlContent}})),v.createElement(u.A,{item:!0},v.createElement(c.A,{className:t.editbutton,onClick:s,visibility:!0===r&&void 0!==e.onSave?"visible":"hidden"},v.createElement(E.Ay,{title:"Click to edit"},v.createElement(Et.A,null)))))};var gt=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const ht=(0,v.memo)((({rawSummary:e,htmlSummary:t,fetchUsers:a,summaryChange:n})=>{const[r,l]=(0,v.useState)(!0),s=(0,v.useCallback)(((e,t)=>{l(t)}),[]),i=(0,v.useCallback)((e=>gt(void 0,void 0,void 0,(function*(){return yield a(e)}))),[a]),c=(0,v.useCallback)((e=>gt(void 0,void 0,void 0,(function*(){n(e)}))),[n]);return v.createElement(g.A,{square:!1,expanded:r,onChange:s},v.createElement(h.A,{expandIcon:v.createElement(y.A,null)},v.createElement(k.x,null,"Summary")),v.createElement(C.A,null,v.createElement(vt,{rawContent:e,htmlContent:t,onSave:c,fetchUsers:i})))}));var Ct=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))};const yt=(0,r.A)((e=>({grow:{flexGrow:1},title:{flexGrow:0,marginRight:e.spacing(3),marginLeft:e.spacing(1)},paper100:{overflow:"hidden",height:"100%"},paperOverflow:{overflow:"hidden"}}))),kt=()=>{const e=yt(),[t,a]=function(){const[e,t]=(0,v.useReducer)(Ne,De),a=(0,v.useCallback)((e=>{switch(e.type){case Ce.Init:t({type:Re.Init,data:e});break;case Ce.UpdateSummary:t({type:Re.UpdateSummary,data:e});break;case Ce.UpdateTitle:t({type:Re.UpdateTitle,data:e});break;case Ce.UpdateCommits:t({type:Re.UpdateCommits,data:e});break;case Ce.UpdateReviewers:t({type:Re.UpdateReviewers,data:e});break;case Ce.UpdateApprovalStatus:t({type:Re.UpdateApprovalStatus,data:e});break;case Ce.CheckoutBranch:t({type:Re.CheckoutBranch,data:e});break;case Ce.UpdateComments:t({type:Re.UpdateComments,data:e});break;case Ce.UpdateTasks:t({type:Re.UpdateTasks,data:e});break;case Ce.UpdateFileDiffs:t({type:Re.UpdateFileDiffs,data:e});break;case Ce.UpdateBuildStatuses:t({type:Re.UpdateBuildStatuses,data:e});break;case Ce.UpdateMergeStrategies:t({type:Re.UpdateMergeStrategies,data:e});break;case Ce.UpdateRelatedJiraIssues:t({type:Re.UpdateRelatedJiraIssues,data:e});break;case Ce.UpdateRelatedBitbucketIssues:t({type:Re.UpdateRelatedBitbucketIssues,data:e});break;default:(0,ve.z)(e)}}),[]),[n,r]=(0,we.G)(a),l=(0,v.useCallback)((()=>{t({type:Re.Loading}),n({type:he.I.Refresh})}),[n]),s=(0,v.useCallback)((e=>n({type:he.I.CopyLink,linkType:"pullRequest",url:e})),[n]),i=(0,v.useCallback)(((e,t,a)=>new Promise(((l,s)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{var i="";a&&(i=(0,ge.v4)(),a.onabort=()=>{n({type:he.I.Cancel,abortKey:i,reason:"pull request fetchUsers cancelled by client"})});const s=yield r({type:Ae.FetchUsersRequest,site:e,query:t,abortKey:a?i:void 0},Ce.FetchUsersResponse,Se.Q);l(s.users)}catch(e){s(e)}}))})()}))),[n,r]),c=(0,v.useCallback)((e=>{t({type:Re.Loading}),n({type:Ae.UpdateSummaryRequest,text:e})}),[n]),o=(0,v.useCallback)((e=>{t({type:Re.Loading}),n({type:Ae.UpdateTitleRequest,text:e})}),[n]),d=(0,v.useCallback)((e=>new Promise(((t,a)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{yield r({type:Ae.UpdateReviewers,reviewers:e},Ce.UpdateReviewersResponse,Se.Q),t()}catch(e){a(e)}}))})()}))),[r]),u=(0,v.useCallback)((e=>{t({type:Re.Loading}),n({type:Ae.UpdateApprovalStatus,status:e})}),[n]),m=(0,v.useCallback)((()=>{t({type:Re.Loading}),n({type:Ae.CheckoutBranch})}),[n]),p=(0,v.useCallback)(((e,t)=>new Promise(((a,n)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{yield r({type:Ae.PostComment,rawText:e,parentId:t},Ce.PostCommentResponse,Se.Q),a()}catch(e){n(e)}}))})()}))),[r]),E=(0,v.useCallback)(((e,t)=>new Promise(((a,n)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{yield r({type:Ae.EditComment,rawContent:e,commentId:t},Ce.EditCommentResponse,Se.Q),a()}catch(e){n(e)}}))})()}))),[r]),f=(0,v.useCallback)((e=>new Promise(((t,a)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{yield r({type:Ae.DeleteComment,comment:e},Ce.DeleteCommentResponse,Se.Q),t()}catch(e){a(e)}}))})()}))),[r]),b=(0,v.useCallback)(((e,t)=>new Promise(((a,n)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{yield r({type:Ae.AddTask,content:e,commentId:t},Ce.AddTaskResponse,Se.Q),a()}catch(e){n(e)}}))})()}))),[r]),A=(0,v.useCallback)((e=>new Promise(((t,a)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{yield r({type:Ae.EditTask,task:e},Ce.EditTaskResponse,Se.Q),t()}catch(e){a(e)}}))})()}))),[r]),g=(0,v.useCallback)((e=>new Promise(((t,a)=>{(()=>{Oe(this,void 0,void 0,(function*(){try{yield r({type:Ae.DeleteTask,task:e},Ce.DeleteTaskResponse,Se.Q),t()}catch(e){a(e)}}))})()}))),[r]),h=(0,v.useCallback)((e=>n({type:Ae.OpenDiffRequest,fileDiff:e})),[n]),C=(0,v.useCallback)(((e,a,r,l)=>{t({type:Re.Loading}),n({type:Ae.Merge,mergeStrategy:e,commitMessage:a,closeSourceBranch:r,issues:l})}),[n]),y=(0,v.useCallback)((e=>{n({type:Ae.OpenJiraIssue,issue:e})}),[n]),k=(0,v.useCallback)((e=>{n({type:Ae.OpenBitbucketIssue,issue:e})}),[n]),S=(0,v.useCallback)((e=>{n({type:Ae.OpenBuildStatus,buildStatus:e})}),[n]);return[e,(0,v.useMemo)((()=>({postMessage:n,refresh:l,copyLink:s,fetchUsers:i,updateSummary:c,updateTitle:o,updateReviewers:d,updateApprovalStatus:u,checkoutBranch:m,postComment:p,editComment:E,deleteComment:f,addTask:b,editTask:A,deleteTask:g,openDiff:h,merge:C,openJiraIssue:y,openBitbucketIssue:k,openBuildStatus:S})),[n,l,s,i,c,o,d,u,m,p,E,f,b,A,g,h,C,y,k,S])]}(),[r,g]=(0,v.useState)("UNAPPROVED"),h=(0,A.A)(((e,n)=>Ct(void 0,void 0,void 0,(function*(){return yield a.fetchUsers(t.pr.site,e,n)}))),300,{leading:!1}),C=(0,v.useCallback)((()=>Object.entries(t.loadState).some((e=>e[1]))),[t.loadState]),y=(0,v.useCallback)((()=>{const e=t.tasks.length,a=t.tasks.filter((e=>e.isComplete)).length;return 0===e?"0 tasks":`${a} of ${e} complete`}),[t.tasks]);return(0,v.useEffect)((()=>{const e=t.pr.data.participants.find((e=>e.accountId===t.currentUser.accountId));e&&g(e.status)}),[t.pr.data.participants,t.currentUser.accountId]),v.createElement(Ue.Provider,{value:a},v.createElement(l.A,{maxWidth:"xl"},v.createElement(s.A,{position:"relative"},v.createElement(i.A,null,v.createElement(c.A,{flexGrow:1},v.createElement(o.A,{variant:"h3"},v.createElement(d.A,{color:"textPrimary",href:t.pr.data.url},`${t.pr.data.destination.repo.displayName}: Pull request #${t.pr.data.id}`))),v.createElement(I.g,{tooltip:"Copy link to pull request",url:t.pr.data.url,onClick:a.copyLink}),v.createElement(c.A,{marginLeft:1,hidden:t.loadState.basicData},v.createElement(pe,{hidden:t.pr.site.details.isCloud||t.currentUser.accountId===t.pr.data.author.accountId,status:r,onApprove:a.updateApprovalStatus})),v.createElement(c.A,{marginLeft:1,hidden:t.loadState.basicData},v.createElement(R,{hidden:!t.pr.site.details.isCloud&&t.currentUser.accountId===t.pr.data.author.accountId,status:r,onApprove:a.updateApprovalStatus})),v.createElement(c.A,{marginLeft:1,hidden:t.loadState.basicData},v.createElement(ue,{prData:t.pr.data,commits:t.commits,relatedJiraIssues:t.relatedJiraIssues,relatedBitbucketIssues:t.relatedBitbucketIssues,mergeStrategies:t.mergeStrategies,loadState:{basicData:t.loadState.basicData,commits:t.loadState.commits,mergeStrategies:t.loadState.mergeStrategies,relatedJiraIssues:t.loadState.relatedJiraIssues,relatedBitbucketIssues:t.loadState.relatedBitbucketIssues},merge:a.merge})),v.createElement(n.sv,{loading:C(),onClick:a.refresh}))),v.createElement(c.A,{marginTop:1}),v.createElement(u.A,{container:!0,spacing:1,direction:"row",wrap:"wrap-reverse"},v.createElement(u.A,{item:!0,xs:12,md:9,lg:9,xl:9},v.createElement(m.A,{className:e.paper100},v.createElement(c.A,{margin:2},v.createElement(u.A,{container:!0,direction:"column",spacing:1},v.createElement(u.A,{item:!0},v.createElement(n.wI,{fullWidth:!0,defaultValue:t.pr.data.title,onSave:a.updateTitle})),v.createElement(u.A,{item:!0},v.createElement(u.A,{container:!0,direction:"row",spacing:2,justify:"space-between"},v.createElement(u.A,{item:!0},v.createElement(c.A,{marginLeft:2},v.createElement(M,{source:t.pr.data.source,destination:t.pr.data.destination,author:t.pr.data.author,isLoading:t.loadState.basicData}))),v.createElement(u.A,{item:!0},v.createElement(p.A,{disabled:t.pr.data.source.branchName===t.currentBranchName,onClick:a.checkoutBranch,color:"primary"},v.createElement(o.A,{variant:"button",noWrap:!0},t.pr.data.source.branchName===t.currentBranchName?"Source branch checked out":"Checkout source branch"))))))),v.createElement(c.A,{margin:2},v.createElement(u.A,{container:!0,spacing:3,direction:"column",justify:"center"},v.createElement(U.n,null),v.createElement(u.A,{item:!0},v.createElement(ht,{rawSummary:t.pr.data.rawSummary,htmlSummary:t.pr.data.htmlSummary,fetchUsers:h,summaryChange:a.updateSummary})),v.createElement(u.A,{item:!0},v.createElement(w,{title:"Related Jira Issues",subtitle:`${t.relatedJiraIssues.length} issues`,isLoading:t.loadState.relatedJiraIssues,hidden:0===t.relatedJiraIssues.length},v.createElement(Ke,{relatedIssues:t.relatedJiraIssues,openJiraIssue:a.openJiraIssue}))),v.createElement(u.A,{item:!0},v.createElement(w,{title:"Related Bitbucket Issues",subtitle:`${t.relatedBitbucketIssues.length} issues`,isLoading:t.loadState.relatedBitbucketIssues,hidden:0===t.relatedBitbucketIssues.length},v.createElement(He,{relatedIssues:t.relatedBitbucketIssues,openBitbucketIssue:a.openBitbucketIssue}))),v.createElement(u.A,{item:!0},v.createElement(w,{title:"Commits",subtitle:`${t.commits.length} commits`,isDefaultExpanded:!0,isLoading:t.loadState.commits},v.createElement(P.f,{commits:t.commits}))),v.createElement(u.A,{item:!0},v.createElement(w,{title:"Tasks",subtitle:y(),isDefaultExpanded:!0,isLoading:t.loadState.tasks},v.createElement(Le,{tasks:t.tasks,onEdit:a.editTask,onDelete:a.deleteTask}))),v.createElement(u.A,{item:!0},v.createElement(w,{title:"Files Changed",subtitle:"Click on file names to open diff in editor",isDefaultExpanded:!0,isLoading:t.loadState.diffs},v.createElement(L.K,{fileDiffs:t.fileDiffs,openDiffHandler:a.openDiff}))),v.createElement(u.A,{item:!0},v.createElement(w,{title:"Comments",isDefaultExpanded:!0,isLoading:t.loadState.comments},v.createElement(u.A,{container:!0,spacing:2,direction:"column"},v.createElement(u.A,{item:!0},v.createElement(Me,{comments:t.comments,currentUser:t.currentUser,fetchUsers:h,onDelete:a.deleteComment})),v.createElement(u.A,{item:!0},v.createElement(O.A,{currentUser:t.currentUser,fetchUsers:h,onSave:a.postComment}))))))))),v.createElement(u.A,{item:!0,xs:12,md:3,lg:3,xl:3},v.createElement(m.A,{className:e.paperOverflow},v.createElement(c.A,{margin:2},v.createElement(u.A,{container:!0,spacing:1,direction:"column"},v.createElement(u.A,{item:!0},v.createElement(o.A,{variant:"h6"},v.createElement("strong",null,"Author")),v.createElement(c.A,{hidden:t.loadState.basicData},v.createElement(u.A,{container:!0,spacing:1,direction:"row",alignItems:"center"},v.createElement(u.A,{item:!0}," ",v.createElement(E.Ay,{title:t.pr.data.author.displayName},v.createElement(f.A,{alt:t.pr.data.author.displayName,src:t.pr.data.author.avatarUrl}))),v.createElement(u.A,{item:!0},v.createElement(o.A,null,t.pr.data.author.displayName)))),v.createElement(c.A,{hidden:!t.loadState.basicData},v.createElement(b.A,null))),v.createElement(u.A,{item:!0},v.createElement(o.A,{variant:"h6"},v.createElement("strong",null,"Reviewers")),v.createElement(c.A,{marginLeft:2,marginTop:1},v.createElement(mt,{site:t.pr.site,participants:t.pr.data.participants,onUpdateReviewers:a.updateReviewers,isLoading:t.loadState.basicData}))),v.createElement(u.A,{item:!0},v.createElement(o.A,{variant:"h6"},v.createElement("strong",null,"Created")),v.createElement(E.Ay,{title:t.pr.data.ts||"unknown"},v.createElement(o.A,null,B(t.pr.data.ts)))),v.createElement(u.A,{item:!0},v.createElement(o.A,{variant:"h6"},v.createElement("strong",null,"Updated")),v.createElement(E.Ay,{title:t.pr.data.updatedTs||"unknown"},v.createElement(o.A,null,B(t.pr.data.updatedTs)))),v.createElement(u.A,{item:!0},v.createElement(w,{isLoading:t.loadState.buildStatuses,isDefaultExpanded:!0,hidden:0===t.buildStatuses.length,title:`${t.buildStatuses.filter((e=>"SUCCESSFUL"===e.state)).length} of ${t.buildStatuses.length} build${t.buildStatuses.length>0?"s":""} passed`},v.createElement(qe,{buildStatuses:t.buildStatuses,openBuildStatus:a.openBuildStatus}))))))))))},St=kt},27030:(e,t,a)=>{var n;a.d(t,{Q:()=>r}),function(e){e[e.SECONDS=1e3]="SECONDS",e[e.MINUTES=6e4]="MINUTES",e[e.HOURS=36e5]="HOURS"}(n||(n={}));const r=30*n.SECONDS}}]);